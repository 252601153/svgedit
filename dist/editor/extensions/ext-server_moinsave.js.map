{"version":3,"file":"ext-server_moinsave.js","sources":["../../../src/editor/canvg/rgbcolor.js","../../../src/external/stackblur-canvas/dist/stackblur-es.js","../../../src/editor/canvg/canvg.js","../../../src/editor/extensions/ext-server_moinsave.js"],"sourcesContent":["/**\n * For parsing color values.\n * @module RGBColor\n * @author Stoyan Stefanov <sstoo@gmail.com>\n * @see https://www.phpied.com/rgb-color-parser-in-javascript/\n * @license MIT\n*/\nconst simpleColors = {\n  aliceblue: 'f0f8ff',\n  antiquewhite: 'faebd7',\n  aqua: '00ffff',\n  aquamarine: '7fffd4',\n  azure: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '000000',\n  blanchedalmond: 'ffebcd',\n  blue: '0000ff',\n  blueviolet: '8a2be2',\n  brown: 'a52a2a',\n  burlywood: 'deb887',\n  cadetblue: '5f9ea0',\n  chartreuse: '7fff00',\n  chocolate: 'd2691e',\n  coral: 'ff7f50',\n  cornflowerblue: '6495ed',\n  cornsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: '00ffff',\n  darkblue: '00008b',\n  darkcyan: '008b8b',\n  darkgoldenrod: 'b8860b',\n  darkgray: 'a9a9a9',\n  darkgreen: '006400',\n  darkkhaki: 'bdb76b',\n  darkmagenta: '8b008b',\n  darkolivegreen: '556b2f',\n  darkorange: 'ff8c00',\n  darkorchid: '9932cc',\n  darkred: '8b0000',\n  darksalmon: 'e9967a',\n  darkseagreen: '8fbc8f',\n  darkslateblue: '483d8b',\n  darkslategray: '2f4f4f',\n  darkturquoise: '00ced1',\n  darkviolet: '9400d3',\n  deeppink: 'ff1493',\n  deepskyblue: '00bfff',\n  dimgray: '696969',\n  dodgerblue: '1e90ff',\n  feldspar: 'd19275',\n  firebrick: 'b22222',\n  floralwhite: 'fffaf0',\n  forestgreen: '228b22',\n  fuchsia: 'ff00ff',\n  gainsboro: 'dcdcdc',\n  ghostwhite: 'f8f8ff',\n  gold: 'ffd700',\n  goldenrod: 'daa520',\n  gray: '808080',\n  green: '008000',\n  greenyellow: 'adff2f',\n  honeydew: 'f0fff0',\n  hotpink: 'ff69b4',\n  indianred: 'cd5c5c',\n  indigo: '4b0082',\n  ivory: 'fffff0',\n  khaki: 'f0e68c',\n  lavender: 'e6e6fa',\n  lavenderblush: 'fff0f5',\n  lawngreen: '7cfc00',\n  lemonchiffon: 'fffacd',\n  lightblue: 'add8e6',\n  lightcoral: 'f08080',\n  lightcyan: 'e0ffff',\n  lightgoldenrodyellow: 'fafad2',\n  lightgrey: 'd3d3d3',\n  lightgreen: '90ee90',\n  lightpink: 'ffb6c1',\n  lightsalmon: 'ffa07a',\n  lightseagreen: '20b2aa',\n  lightskyblue: '87cefa',\n  lightslateblue: '8470ff',\n  lightslategray: '778899',\n  lightsteelblue: 'b0c4de',\n  lightyellow: 'ffffe0',\n  lime: '00ff00',\n  limegreen: '32cd32',\n  linen: 'faf0e6',\n  magenta: 'ff00ff',\n  maroon: '800000',\n  mediumaquamarine: '66cdaa',\n  mediumblue: '0000cd',\n  mediumorchid: 'ba55d3',\n  mediumpurple: '9370d8',\n  mediumseagreen: '3cb371',\n  mediumslateblue: '7b68ee',\n  mediumspringgreen: '00fa9a',\n  mediumturquoise: '48d1cc',\n  mediumvioletred: 'c71585',\n  midnightblue: '191970',\n  mintcream: 'f5fffa',\n  mistyrose: 'ffe4e1',\n  moccasin: 'ffe4b5',\n  navajowhite: 'ffdead',\n  navy: '000080',\n  oldlace: 'fdf5e6',\n  olive: '808000',\n  olivedrab: '6b8e23',\n  orange: 'ffa500',\n  orangered: 'ff4500',\n  orchid: 'da70d6',\n  palegoldenrod: 'eee8aa',\n  palegreen: '98fb98',\n  paleturquoise: 'afeeee',\n  palevioletred: 'd87093',\n  papayawhip: 'ffefd5',\n  peachpuff: 'ffdab9',\n  peru: 'cd853f',\n  pink: 'ffc0cb',\n  plum: 'dda0dd',\n  powderblue: 'b0e0e6',\n  purple: '800080',\n  red: 'ff0000',\n  rosybrown: 'bc8f8f',\n  royalblue: '4169e1',\n  saddlebrown: '8b4513',\n  salmon: 'fa8072',\n  sandybrown: 'f4a460',\n  seagreen: '2e8b57',\n  seashell: 'fff5ee',\n  sienna: 'a0522d',\n  silver: 'c0c0c0',\n  skyblue: '87ceeb',\n  slateblue: '6a5acd',\n  slategray: '708090',\n  snow: 'fffafa',\n  springgreen: '00ff7f',\n  steelblue: '4682b4',\n  tan: 'd2b48c',\n  teal: '008080',\n  thistle: 'd8bfd8',\n  tomato: 'ff6347',\n  turquoise: '40e0d0',\n  violet: 'ee82ee',\n  violetred: 'd02090',\n  wheat: 'f5deb3',\n  white: 'ffffff',\n  whitesmoke: 'f5f5f5',\n  yellow: 'ffff00',\n  yellowgreen: '9acd32'\n};\n\n// array of color definition objects\nconst colorDefs = [\n  {\n    re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n    // re: /^rgb\\((?<r>\\d{1,3}),\\s*(?<g>\\d{1,3}),\\s*(?<b>\\d{1,3})\\)$/,\n    example: ['rgb(123, 234, 45)', 'rgb(255,234,245)'],\n    process (_, ...bits) {\n      return bits.map((b) => Number.parseInt(b));\n    }\n  },\n  {\n    re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n    // re: /^(?<r>\\w{2})(?<g>\\w{2})(?<b>\\w{2})$/,\n    example: ['#00ff00', '336699'],\n    process (_, ...bits) {\n      return bits.map((b) => Number.parseInt(b, 16));\n    }\n  },\n  {\n    re: /^(\\w)(\\w)(\\w)$/,\n    // re: /^(?<r>\\w{1})(?<g>\\w{1})(?<b>\\w{1})$/,\n    example: ['#fb0', 'f0f'],\n    process (_, ...bits) {\n      return bits.map((b) => Number.parseInt(b + b, 16));\n    }\n  }\n];\n\n/**\n * A class to parse color values.\n */\nexport default class RGBColor {\n  /**\n  * @param {string} colorString\n  */\n  constructor (colorString) {\n    this.ok = false;\n\n    // strip any leading #\n    if (colorString.charAt(0) === '#') { // remove # if any\n      colorString = colorString.substr(1, 6);\n    }\n\n    colorString = colorString.replace(/ /g, '');\n    colorString = colorString.toLowerCase();\n\n    // before getting into regexps, try simple matches\n    // and overwrite the input\n    if (colorString in simpleColors) {\n      colorString = simpleColors[colorString];\n    }\n    // end of simple type-in colors\n\n    // search through the definitions to find a match\n\n    colorDefs.forEach(({re, process: processor}) => {\n      const bits = re.exec(colorString);\n      if (bits) {\n        const [r, g, b] = processor(...bits);\n        Object.assign(this, {r, g, b});\n        this.ok = true;\n      }\n    });\n\n    // validate/cleanup values\n    this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r);\n    this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g);\n    this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b);\n  }\n\n  // some getters\n  /**\n  * @returns {string}\n  */\n  toRGB () {\n    return 'rgb(' + this.r + ', ' + this.g + ', ' + this.b + ')';\n  }\n\n  /**\n  * @returns {string}\n  */\n  toHex () {\n    let r = this.r.toString(16);\n    let g = this.g.toString(16);\n    let b = this.b.toString(16);\n    if (r.length === 1) { r = '0' + r; }\n    if (g.length === 1) { g = '0' + g; }\n    if (b.length === 1) { b = '0' + b; }\n    return '#' + r + g + b;\n  }\n\n  /**\n  * Offers a bulleted list of help.\n  * @returns {HTMLUListElement}\n  */\n  static getHelpXML () {\n    const examples = [\n      // add regexps\n      ...colorDefs.flatMap(({example}) => {\n        return example;\n      }),\n      // add type-in colors\n      ...Object.keys(simpleColors)\n    ];\n\n    const xml = document.createElement('ul');\n    xml.setAttribute('id', 'rgbcolor-examples');\n\n    xml.append(...examples.map((example) => {\n      try {\n        const listItem = document.createElement('li');\n        const listColor = new RGBColor(example);\n        const exampleDiv = document.createElement('div');\n        exampleDiv.style.cssText = `\n  margin: 3px;\n  border: 1px solid black;\n  background: ${listColor.toHex()};\n  color: ${listColor.toHex()};`;\n        exampleDiv.append('test');\n        const listItemValue = ` ${example} -> ${listColor.toRGB()} -> ${listColor.toHex()}`;\n        listItem.append(exampleDiv, listItemValue);\n        return listItem;\n      } catch (e) {\n        return '';\n      }\n    }));\n    return xml;\n  }\n}\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n/* eslint-disable no-bitwise, unicorn/prefer-query-selector */\n\n/**\n* StackBlur - a fast almost Gaussian Blur For Canvas\n*\n* In case you find this class useful - especially in commercial projects -\n* I am not totally unhappy for a small donation to my PayPal account\n* mario@quasimondo.de\n*\n* Or support me on flattr:\n* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.\n*\n* @module StackBlur\n* @author Mario Klingemann\n* Contact: mario@quasimondo.com\n* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}\n* Twitter: @quasimondo\n*\n* @copyright (c) 2010 Mario Klingemann\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n/* eslint-disable max-len */\nvar mulTable = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shgTable = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n/* eslint-enable max-len */\n\n/**\n * @param {string|HTMLImageElement} img\n * @param {string|HTMLCanvasElement} canvas\n * @param {Float} radius\n * @param {boolean} blurAlphaChannel\n * @returns {undefined}\n */\n\nfunction processImage(img, canvas, radius, blurAlphaChannel) {\n  if (typeof img === 'string') {\n    img = document.getElementById(img);\n  }\n\n  if (!img || !('naturalWidth' in img)) {\n    return;\n  }\n\n  var w = img.naturalWidth;\n  var h = img.naturalHeight;\n\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || !('getContext' in canvas)) {\n    return;\n  }\n\n  canvas.style.width = w + 'px';\n  canvas.style.height = h + 'px';\n  canvas.width = w;\n  canvas.height = h;\n  var context = canvas.getContext('2d');\n  context.clearRect(0, 0, w, h);\n  context.drawImage(img, 0, 0);\n\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  if (blurAlphaChannel) {\n    processCanvasRGBA(canvas, 0, 0, w, h, radius);\n  } else {\n    processCanvasRGB(canvas, 0, 0, w, h, radius);\n  }\n}\n/**\n * @param {string|HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @throws {Error|TypeError}\n * @returns {ImageData} See {@link https://html.spec.whatwg.org/multipage/canvas.html#imagedata}\n */\n\n\nfunction getImageDataFromCanvas(canvas, topX, topY, width, height) {\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || _typeof(canvas) !== 'object' || !('getContext' in canvas)) {\n    throw new TypeError('Expecting canvas with `getContext` method ' + 'in processCanvasRGB(A) calls!');\n  }\n\n  var context = canvas.getContext('2d');\n\n  try {\n    return context.getImageData(topX, topY, width, height);\n  } catch (e) {\n    throw new Error('unable to access image data: ' + e);\n  }\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGBA(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGBA(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGBA(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var x, y, i, p, yp, yi, yw, rSum, gSum, bSum, aSum, rOutSum, gOutSum, bOutSum, aOutSum, rInSum, gInSum, bInSum, aInSum, pr, pg, pb, pa, rbs;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  yw = yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n\n  for (y = 0; y < height; y++) {\n    rInSum = gInSum = bInSum = aInSum = rSum = gSum = bSum = aSum = 0;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    aOutSum = radiusPlus1 * (pa = pixels[yi + 3]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    aSum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    for (i = 1; i < radiusPlus1; i++) {\n      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      aSum += (stack.a = pa = pixels[p + 3]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      aInSum += pa;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (x = 0; x < width; x++) {\n      pixels[yi + 3] = pa = aSum * mulSum >> shgSum;\n\n      if (pa !== 0) {\n        pa = 255 / pa;\n        pixels[yi] = (rSum * mulSum >> shgSum) * pa;\n        pixels[yi + 1] = (gSum * mulSum >> shgSum) * pa;\n        pixels[yi + 2] = (bSum * mulSum >> shgSum) * pa;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      aInSum += stackIn.a = pixels[p + 3];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      aSum += aInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      aOutSum += pa = stackOut.a;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      aInSum -= pa;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (x = 0; x < width; x++) {\n    gInSum = bInSum = aInSum = rInSum = gSum = bSum = aSum = rSum = 0;\n    yi = x << 2;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    aOutSum = radiusPlus1 * (pa = pixels[yi + 3]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    aSum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    yp = width;\n\n    for (i = 1; i <= radius; i++) {\n      yi = yp + x << 2;\n      rSum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[yi + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[yi + 2]) * rbs;\n      aSum += (stack.a = pa = pixels[yi + 3]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      aInSum += pa;\n      stack = stack.next;\n\n      if (i < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (y = 0; y < height; y++) {\n      p = yi << 2;\n      pixels[p + 3] = pa = aSum * mulSum >> shgSum;\n\n      if (pa > 0) {\n        pa = 255 / pa;\n        pixels[p] = (rSum * mulSum >> shgSum) * pa;\n        pixels[p + 1] = (gSum * mulSum >> shgSum) * pa;\n        pixels[p + 2] = (bSum * mulSum >> shgSum) * pa;\n      } else {\n        pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n      }\n\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      rSum += rInSum += stackIn.r = pixels[p];\n      gSum += gInSum += stackIn.g = pixels[p + 1];\n      bSum += bInSum += stackIn.b = pixels[p + 2];\n      aSum += aInSum += stackIn.a = pixels[p + 3];\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      aOutSum += pa = stackOut.a;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      aInSum -= pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGB(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGB(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGB(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var x, y, i, p, yp, yi, yw, rSum, gSum, bSum, rOutSum, gOutSum, bOutSum, rInSum, gInSum, bInSum, pr, pg, pb, rbs;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  yw = yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n\n  for (y = 0; y < height; y++) {\n    rInSum = gInSum = bInSum = rSum = gSum = bSum = 0;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n\n    for (i = 1; i < radiusPlus1; i++) {\n      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (x = 0; x < width; x++) {\n      pixels[yi] = rSum * mulSum >> shgSum;\n      pixels[yi + 1] = gSum * mulSum >> shgSum;\n      pixels[yi + 2] = bSum * mulSum >> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (x = 0; x < width; x++) {\n    gInSum = bInSum = rInSum = gSum = bSum = rSum = 0;\n    yi = x << 2;\n    rOutSum = radiusPlus1 * (pr = pixels[yi]);\n    gOutSum = radiusPlus1 * (pg = pixels[yi + 1]);\n    bOutSum = radiusPlus1 * (pb = pixels[yi + 2]);\n    rSum += sumFactor * pr;\n    gSum += sumFactor * pg;\n    bSum += sumFactor * pb;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n\n    yp = width;\n\n    for (i = 1; i <= radius; i++) {\n      yi = yp + x << 2;\n      rSum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n      gSum += (stack.g = pg = pixels[yi + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[yi + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n\n      if (i < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (y = 0; y < height; y++) {\n      p = yi << 2;\n      pixels[p] = rSum * mulSum >> shgSum;\n      pixels[p + 1] = gSum * mulSum >> shgSum;\n      pixels[p + 2] = bSum * mulSum >> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      rSum += rInSum += stackIn.r = pixels[p];\n      gSum += gInSum += stackIn.g = pixels[p + 1];\n      bSum += bInSum += stackIn.b = pixels[p + 2];\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n *\n */\n\n\nvar BlurStack =\n/**\n * Set properties.\n */\nfunction BlurStack() {\n  _classCallCheck(this, BlurStack);\n\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n};\n\nexport { BlurStack, processCanvasRGB as canvasRGB, processCanvasRGBA as canvasRGBA, processImage as image, processImageDataRGB as imageDataRGB, processImageDataRGBA as imageDataRGBA };\n","/* eslint-disable new-cap, class-methods-use-this, jsdoc/require-jsdoc */\n// Todo: Compare with latest canvg (add any improvements of ours) and add full JSDocs (denoting links to standard APIs and which are custom): https://github.com/canvg/canvg\n/**\n * Javascript SVG parser and renderer on Canvas.\n * @file canvg.js\n * @module canvg\n * @license MIT\n * @author Gabe Lerner <gabelerner@gmail.com>\n * @see https://github.com/canvg/canvg\n */\n\nimport RGBColor from './rgbcolor.js';\nimport {canvasRGBA} from '../../external/stackblur-canvas/dist/stackblur-es.js';\n\n/**\n * Whether a value is `null` or `undefined`.\n * @param {any} val\n * @returns {boolean}\n */\nconst isNullish = (val) => {\n  return val === null || val === undefined;\n};\n\n/**\n* @callback module:canvg.ForceRedraw\n* @returns {boolean}\n*/\n\n/**\n* @typedef {PlainObject} module:canvg.CanvgOptions\n* @property {boolean} ignoreMouse true => ignore mouse events\n* @property {boolean} ignoreAnimation true => ignore animations\n* @property {boolean} ignoreDimensions true => does not try to resize canvas\n* @property {boolean} ignoreClear true => does not clear canvas\n* @property {Integer} offsetX int => draws at a x offset\n* @property {Integer} offsetY int => draws at a y offset\n* @property {Integer} scaleWidth int => scales horizontally to width\n* @property {Integer} scaleHeight int => scales vertically to height\n* @property {module:canvg.ForceRedraw} forceRedraw function => will call the function on every frame, if it returns true, will redraw\n* @property {boolean} log Adds log function\n* @property {boolean} useCORS Whether to set CORS `crossOrigin` for the image to `Anonymous`\n*/\n\n/**\n* If called with no arguments, it will replace all `<svg>` elements on the page\n* with `<canvas>` elements.\n* @function module:canvg.canvg\n* @param {HTMLCanvasElement|string} target canvas element or the id of a canvas element\n* @param {string|XMLDocument} s - svg string, url to svg file, or xml document\n* @param {module:canvg.CanvgOptions} [opts] Optional hash of options\n* @returns {Promise<XMLDocument|XMLDocument[]>} All the function after the first render is completed with dom\n*/\nexport const canvg = function (target, s, opts) {\n  // no parameters\n  if (isNullish(target) && isNullish(s) && isNullish(opts)) {\n    const svgTags = document.querySelectorAll('svg');\n    return Promise.all([...svgTags].map((svgTag) => {\n      const c = document.createElement('canvas');\n      c.width = svgTag.clientWidth;\n      c.height = svgTag.clientHeight;\n      svgTag.before(c);\n      svgTag.remove();\n      const div = document.createElement('div');\n      div.append(svgTag);\n      return canvg(c, div.innerHTML);\n    }));\n  }\n\n  if (typeof target === 'string') {\n    target = document.getElementById(target);\n  }\n\n  // store class on canvas\n  if (!isNullish(target.svg)) target.svg.stop();\n  const svg = build(opts || {});\n  // on i.e. 8 for flash canvas, we can't assign the property so check for it\n  if (!(target.childNodes.length === 1 && target.childNodes[0].nodeName === 'OBJECT')) {\n    target.svg = svg;\n  }\n\n  const ctx = target.getContext('2d');\n  if (typeof s.documentElement !== 'undefined') {\n    // load from xml doc\n    return svg.loadXmlDoc(ctx, s);\n  }\n  if (s.substr(0, 1) === '<') {\n    // load from xml string\n    return svg.loadXml(ctx, s);\n  }\n  // load from url\n  return svg.load(ctx, s);\n};\n\n/* eslint-disable jsdoc/check-types */\n/**\n* @param {module:canvg.CanvgOptions} opts\n* @returns {object}\n* @todo Flesh out exactly what object is returned here (after updating to latest and reincluding our changes here and those of StackBlur)\n*/\nfunction build (opts) {\n  /* eslint-enable jsdoc/check-types */\n  const svg = {opts};\n\n  svg.FRAMERATE = 30;\n  svg.MAX_VIRTUAL_PIXELS = 30000;\n\n  svg.log = function (msg) { /* */ };\n  if (svg.opts.log === true && typeof console !== 'undefined') {\n    svg.log = function (msg) { console.log(msg); }; // eslint-disable-line no-console\n  }\n\n  // globals\n  svg.init = function (ctx) {\n    let uniqueId = 0;\n    svg.UniqueId = function () {\n      uniqueId++;\n      return 'canvg' + uniqueId;\n    };\n    svg.Definitions = {};\n    svg.Styles = {};\n    svg.Animations = [];\n    svg.Images = [];\n    svg.ctx = ctx;\n    svg.ViewPort = {\n      viewPorts: [],\n      Clear () { this.viewPorts = []; },\n      SetCurrent (width, height) { this.viewPorts.push({width, height}); },\n      RemoveCurrent () { this.viewPorts.pop(); },\n      Current () { return this.viewPorts[this.viewPorts.length - 1]; },\n      width () { return this.Current().width; },\n      height () { return this.Current().height; },\n      ComputeSize (d) {\n        if (!isNullish(d) && typeof d === 'number') return d;\n        if (d === 'x') return this.width();\n        if (d === 'y') return this.height();\n        return Math.sqrt(\n          (this.width() ** 2) + (this.height() ** 2)\n        ) / Math.sqrt(2);\n      }\n    };\n  };\n  svg.init();\n\n  // images loaded\n  svg.ImagesLoaded = function () {\n    return svg.Images.every((img) => img.loaded);\n  };\n\n  // trim\n  svg.trim = function (s) {\n    return s.replace(/^\\s+|\\s+$/g, '');\n  };\n\n  // compress spaces\n  svg.compressSpaces = function (s) {\n    return s.replace(/\\s+/gm, ' ');\n  };\n\n  // ajax\n  // Todo: Replace with `fetch` and polyfill\n  svg.ajax = function (url, asynch) {\n    const AJAX = window.XMLHttpRequest\n      ? new XMLHttpRequest()\n      : new window.ActiveXObject('Microsoft.XMLHTTP');\n    if (asynch) {\n      return new Promise((resolve, reject) => { // eslint-disable-line promise/avoid-new\n        const req = AJAX.open('GET', url, true);\n        req.addEventListener('load', () => {\n          resolve(AJAX.responseText);\n        });\n        AJAX.send(null);\n      });\n    }\n\n    AJAX.open('GET', url, false);\n    AJAX.send(null);\n    return AJAX.responseText;\n  };\n\n  // parse xml\n  svg.parseXml = function (xml) {\n    if (window.DOMParser) {\n      const parser = new DOMParser();\n      return parser.parseFromString(xml, 'text/xml');\n    }\n    xml = xml.replace(/<!DOCTYPE svg[^>]*>/, '');\n    const xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM');\n    xmlDoc.async = 'false';\n    xmlDoc.loadXML(xml);\n    return xmlDoc;\n  };\n\n  // text extensions\n  // get the text baseline\n  const textBaselineMapping = {\n    baseline: 'alphabetic',\n    'before-edge': 'top',\n    'text-before-edge': 'top',\n    middle: 'middle',\n    central: 'middle',\n    'after-edge': 'bottom',\n    'text-after-edge': 'bottom',\n    ideographic: 'ideographic',\n    alphabetic: 'alphabetic',\n    hanging: 'hanging',\n    mathematical: 'alphabetic'\n  };\n\n  svg.Property = class Property {\n    constructor (name, value) {\n      this.name = name;\n      this.value = value;\n    }\n\n    getValue () {\n      return this.value;\n    }\n\n    hasValue () {\n      return (!isNullish(this.value) && this.value !== '');\n    }\n\n    // return the numerical value of the property\n    numValue () {\n      if (!this.hasValue()) return 0;\n\n      let n = Number.parseFloat(this.value);\n      if (String(this.value).endsWith('%')) {\n        n /= 100.0;\n      }\n      return n;\n    }\n\n    valueOrDefault (def) {\n      if (this.hasValue()) return this.value;\n      return def;\n    }\n\n    numValueOrDefault (def) {\n      if (this.hasValue()) return this.numValue();\n      return def;\n    }\n\n    // color extensions\n    // augment the current color value with the opacity\n    addOpacity (opacityProp) {\n      let newValue = this.value;\n      if (!isNullish(opacityProp.value) && opacityProp.value !== '' && typeof this.value === 'string') { // can only add opacity to colors, not patterns\n        const color = new RGBColor(this.value);\n        if (color.ok) {\n          newValue = 'rgba(' + color.r + ', ' + color.g + ', ' + color.b + ', ' + opacityProp.numValue() + ')';\n        }\n      }\n      return new svg.Property(this.name, newValue);\n    }\n\n    // definition extensions\n    // get the definition from the definitions table\n    getDefinition () {\n      let name = this.value.match(/#([^)'\"]+)/);\n      if (name) { name = name[1]; }\n      if (!name) { name = this.value; }\n      return svg.Definitions[name];\n    }\n\n    isUrlDefinition () {\n      return this.value.startsWith('url(');\n    }\n\n    getFillStyleDefinition (e, opacityProp) {\n      let def = this.getDefinition();\n\n      // gradient\n      if (!isNullish(def) && def.createGradient) {\n        return def.createGradient(svg.ctx, e, opacityProp);\n      }\n\n      // pattern\n      if (!isNullish(def) && def.createPattern) {\n        if (def.getHrefAttribute().hasValue()) {\n          const pt = def.attribute('patternTransform');\n          def = def.getHrefAttribute().getDefinition();\n          if (pt.hasValue()) { def.attribute('patternTransform', true).value = pt.value; }\n        }\n        return def.createPattern(svg.ctx, e);\n      }\n\n      return null;\n    }\n\n    // length extensions\n    getDPI (viewPort) {\n      return 96.0; // TODO: compute?\n    }\n\n    getEM (viewPort) {\n      let em = 12;\n\n      const fontSize = new svg.Property('fontSize', svg.Font.Parse(svg.ctx.font).fontSize);\n      if (fontSize.hasValue()) em = fontSize.toPixels(viewPort);\n\n      return em;\n    }\n\n    getUnits () {\n      return String(this.value).replace(/[\\d.-]/g, '');\n    }\n\n    // get the length as pixels\n    toPixels (viewPort, processPercent) {\n      if (!this.hasValue()) return 0;\n      const s = String(this.value);\n      if (s.endsWith('em')) return this.numValue() * this.getEM(viewPort);\n      if (s.endsWith('ex')) return this.numValue() * this.getEM(viewPort) / 2.0;\n      if (s.endsWith('px')) return this.numValue();\n      if (s.endsWith('pt')) return this.numValue() * this.getDPI(viewPort) * (1.0 / 72.0);\n      if (s.endsWith('pc')) return this.numValue() * 15;\n      if (s.endsWith('cm')) return this.numValue() * this.getDPI(viewPort) / 2.54;\n      if (s.endsWith('mm')) return this.numValue() * this.getDPI(viewPort) / 25.4;\n      if (s.endsWith('in')) return this.numValue() * this.getDPI(viewPort);\n      if (s.endsWith('%')) return this.numValue() * svg.ViewPort.ComputeSize(viewPort);\n      const n = this.numValue();\n      if (processPercent && n < 1.0) return n * svg.ViewPort.ComputeSize(viewPort);\n      return n;\n    }\n\n    // time extensions\n    // get the time as milliseconds\n    toMilliseconds () {\n      if (!this.hasValue()) return 0;\n      const s = String(this.value);\n      if (s.endsWith('ms')) return this.numValue();\n      if (s.endsWith('s')) return this.numValue() * 1000;\n      return this.numValue();\n    }\n\n    // angle extensions\n    // get the angle as radians\n    toRadians () {\n      if (!this.hasValue()) return 0;\n      const s = String(this.value);\n      if (s.endsWith('deg')) return this.numValue() * (Math.PI / 180.0);\n      if (s.endsWith('grad')) return this.numValue() * (Math.PI / 200.0);\n      if (s.endsWith('rad')) return this.numValue();\n      return this.numValue() * (Math.PI / 180.0);\n    }\n\n    toTextBaseline () {\n      if (!this.hasValue()) return null;\n      return textBaselineMapping[this.value];\n    }\n  };\n\n  // fonts\n  svg.Font = {\n    Styles: 'normal|italic|oblique|inherit',\n    Variants: 'normal|small-caps|inherit',\n    Weights: 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit',\n\n    CreateFont (fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit) {\n      const f = !isNullish(inherit) ? this.Parse(inherit) : this.CreateFont('', '', '', '', '', svg.ctx.font);\n      return {\n        fontFamily: fontFamily || f.fontFamily,\n        fontSize: fontSize || f.fontSize,\n        fontStyle: fontStyle || f.fontStyle,\n        fontWeight: fontWeight || f.fontWeight,\n        fontVariant: fontVariant || f.fontVariant,\n        toString () {\n          return [\n            this.fontStyle, this.fontVariant, this.fontWeight,\n            this.fontSize, this.fontFamily\n          ].join(' ');\n        }\n      };\n    },\n\n    Parse (s) {\n      const f = {};\n      const ds = svg.trim(svg.compressSpaces(s || '')).split(' ');\n      const set = {\n        fontSize: false, fontStyle: false, fontWeight: false, fontVariant: false\n      };\n      let ff = '';\n      ds.forEach((d) => {\n        if (!set.fontStyle && this.Styles.includes(d)) {\n          if (d !== 'inherit') {\n            f.fontStyle = d;\n          }\n          set.fontStyle = true;\n        } else if (!set.fontVariant && this.Variants.includes(d)) {\n          if (d !== 'inherit') {\n            f.fontVariant = d;\n          }\n          set.fontStyle = set.fontVariant = true;\n        } else if (!set.fontWeight && this.Weights.includes(d)) {\n          if (d !== 'inherit') {\n            f.fontWeight = d;\n          }\n          set.fontStyle = set.fontVariant = set.fontWeight = true;\n        } else if (!set.fontSize) {\n          if (d !== 'inherit') {\n            f.fontSize = d.split('/')[0];\n          }\n          set.fontStyle = set.fontVariant = set.fontWeight = set.fontSize = true;\n        } else if (d !== 'inherit') {\n          ff += d;\n        }\n      });\n      if (ff !== '') { f.fontFamily = ff; }\n      return f;\n    }\n  };\n\n  // points and paths\n  svg.ToNumberArray = function (s) {\n    const a = svg.trim(svg.compressSpaces((s || '').replace(/,/g, ' '))).split(' ');\n    return a.map((_a) => Number.parseFloat(_a));\n  };\n  svg.Point = class {\n    constructor (x, y) {\n      this.x = x;\n      this.y = y;\n    }\n\n    angleTo (p) {\n      return Math.atan2(p.y - this.y, p.x - this.x);\n    }\n\n    applyTransform (v) {\n      const xp = this.x * v[0] + this.y * v[2] + v[4];\n      const yp = this.x * v[1] + this.y * v[3] + v[5];\n      this.x = xp;\n      this.y = yp;\n    }\n  };\n\n  svg.CreatePoint = function (s) {\n    const a = svg.ToNumberArray(s);\n    return new svg.Point(a[0], a[1]);\n  };\n  svg.CreatePath = function (s) {\n    const a = svg.ToNumberArray(s);\n    const path = [];\n    for (let i = 0; i < a.length; i += 2) {\n      path.push(new svg.Point(a[i], a[i + 1]));\n    }\n    return path;\n  };\n\n  // bounding box\n  svg.BoundingBox = class {\n    constructor (x1, y1, x2, y2) { // pass in initial points if you want\n      this.x1 = Number.NaN;\n      this.y1 = Number.NaN;\n      this.x2 = Number.NaN;\n      this.y2 = Number.NaN;\n      this.addPoint(x1, y1);\n      this.addPoint(x2, y2);\n    }\n\n    x () { return this.x1; }\n    y () { return this.y1; }\n    width () { return this.x2 - this.x1; }\n    height () { return this.y2 - this.y1; }\n\n    addPoint (x, y) {\n      if (!isNullish(x)) {\n        if (isNaN(this.x1) || isNaN(this.x2)) {\n          this.x1 = x;\n          this.x2 = x;\n        }\n        if (x < this.x1) this.x1 = x;\n        if (x > this.x2) this.x2 = x;\n      }\n\n      if (!isNullish(y)) {\n        if (isNaN(this.y1) || isNaN(this.y2)) {\n          this.y1 = y;\n          this.y2 = y;\n        }\n        if (y < this.y1) this.y1 = y;\n        if (y > this.y2) this.y2 = y;\n      }\n    }\n    addX (x) { this.addPoint(x, null); }\n    addY (y) { this.addPoint(null, y); }\n\n    addBoundingBox (bb) {\n      this.addPoint(bb.x1, bb.y1);\n      this.addPoint(bb.x2, bb.y2);\n    }\n\n    addQuadraticCurve (p0x, p0y, p1x, p1y, p2x, p2y) {\n      const cp1x = p0x + 2 / 3 * (p1x - p0x); // CP1 = QP0 + 2/3 *(QP1-QP0)\n      const cp1y = p0y + 2 / 3 * (p1y - p0y); // CP1 = QP0 + 2/3 *(QP1-QP0)\n      const cp2x = cp1x + 1 / 3 * (p2x - p0x); // CP2 = CP1 + 1/3 *(QP2-QP0)\n      const cp2y = cp1y + 1 / 3 * (p2y - p0y); // CP2 = CP1 + 1/3 *(QP2-QP0)\n      this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y, cp2y, p2x, p2y);\n    }\n\n    addBezierCurve (p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {\n      // from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n      const p0 = [p0x, p0y], p1 = [p1x, p1y], p2 = [p2x, p2y], p3 = [p3x, p3y];\n      this.addPoint(p0[0], p0[1]);\n      this.addPoint(p3[0], p3[1]);\n\n      for (let i = 0; i <= 1; i++) {\n        const f = function (t) {\n          return ((1 - t) ** 3) * p0[i] +\n          3 * ((1 - t) ** 2) * t * p1[i] +\n          3 * (1 - t) * (t ** 2) * p2[i] +\n          (t ** 3) * p3[i];\n        };\n\n        const b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\n        const a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\n        const c = 3 * p1[i] - 3 * p0[i];\n\n        if (a === 0) {\n          if (b === 0) continue;\n          const t = -c / b;\n          if (t > 0 && t < 1) {\n            if (i === 0) this.addX(f(t));\n            if (i === 1) this.addY(f(t));\n          }\n          continue;\n        }\n\n        const b2ac = (b ** 2) - 4 * c * a;\n        if (b2ac < 0) continue;\n        const t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\n        if (t1 > 0 && t1 < 1) {\n          if (i === 0) this.addX(f(t1));\n          if (i === 1) this.addY(f(t1));\n        }\n        const t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\n        if (t2 > 0 && t2 < 1) {\n          if (i === 0) this.addX(f(t2));\n          if (i === 1) this.addY(f(t2));\n        }\n      }\n    }\n\n    isPointInBox (x, y) {\n      return (this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\n    }\n  };\n\n  // transforms\n  svg.Transform = class {\n    constructor (v) {\n      this.Type = {\n        translate: class {\n          constructor (s) {\n            this.p = svg.CreatePoint(s);\n            this.apply = function (ctx) {\n              ctx.translate(this.p.x || 0.0, this.p.y || 0.0);\n            };\n            this.unapply = function (ctx) {\n              ctx.translate(-1.0 * this.p.x || 0.0, -1.0 * this.p.y || 0.0);\n            };\n            this.applyToPoint = function (p) {\n              p.applyTransform([1, 0, 0, 1, this.p.x || 0.0, this.p.y || 0.0]);\n            };\n          }\n        },\n        rotate: class {\n          constructor (s) {\n            const a = svg.ToNumberArray(s);\n            this.angle = new svg.Property('angle', a[0]);\n            this.cx = a[1] || 0;\n            this.cy = a[2] || 0;\n            this.apply = function (ctx) {\n              ctx.translate(this.cx, this.cy);\n              ctx.rotate(this.angle.toRadians());\n              ctx.translate(-this.cx, -this.cy);\n            };\n            this.unapply = function (ctx) {\n              ctx.translate(this.cx, this.cy);\n              ctx.rotate(-1.0 * this.angle.toRadians());\n              ctx.translate(-this.cx, -this.cy);\n            };\n            this.applyToPoint = function (p) {\n              const _a = this.angle.toRadians();\n              p.applyTransform([1, 0, 0, 1, this.p.x || 0.0, this.p.y || 0.0]);\n              p.applyTransform([Math.cos(_a), Math.sin(_a), -Math.sin(_a), Math.cos(_a), 0, 0]);\n              p.applyTransform([1, 0, 0, 1, -this.p.x || 0.0, -this.p.y || 0.0]);\n            };\n          }\n        },\n        scale: class {\n          constructor (s) {\n            this.p = svg.CreatePoint(s);\n            this.apply = function (ctx) {\n              ctx.scale(this.p.x || 1.0, this.p.y || this.p.x || 1.0);\n            };\n            this.unapply = function (ctx) {\n              ctx.scale(1.0 / this.p.x || 1.0, 1.0 / this.p.y || this.p.x || 1.0);\n            };\n            this.applyToPoint = function (p) {\n              p.applyTransform([this.p.x || 0.0, 0, 0, this.p.y || 0.0, 0, 0]);\n            };\n          }\n        },\n        matrix: class {\n          constructor (s) {\n            this.m = svg.ToNumberArray(s);\n            this.apply = function (ctx) {\n              ctx.transform(this.m[0], this.m[1], this.m[2], this.m[3], this.m[4], this.m[5]);\n            };\n            this.applyToPoint = function (p) {\n              p.applyTransform(this.m);\n            };\n          }\n        }\n      };\n      Object.assign(this.Type, {\n        SkewBase: class extends this.Type.matrix {\n          constructor (s) {\n            super(s);\n            this.angle = new svg.Property('angle', s);\n          }\n        }\n      });\n      Object.assign(this.Type, {\n        skewX: class extends this.Type.SkewBase {\n          constructor (s) {\n            super(s);\n            this.m = [1, 0, Math.tan(this.angle.toRadians()), 1, 0, 0];\n          }\n        },\n        skewY: class extends this.Type.SkewBase {\n          constructor (s) {\n            super(s);\n            this.m = [1, Math.tan(this.angle.toRadians()), 0, 1, 0, 0];\n          }\n        }\n      });\n\n      const data = svg.trim(svg.compressSpaces(v)).replace(\n        /\\)([a-zA-Z])/g, ') $1'\n      ).replace(/\\)(\\s?,\\s?)/g, ') ').split(/\\s(?=[a-z])/);\n      this.transforms = data.map((d) => {\n        const type = svg.trim(d.split('(')[0]);\n        const s = d.split('(')[1].replace(')', '');\n        const transform = new this.Type[type](s);\n        transform.type = type;\n        return transform;\n      });\n    }\n\n    apply (ctx) {\n      this.transforms.forEach((transform) => {\n        transform.apply(ctx);\n      });\n    }\n\n    unapply (ctx) {\n      for (let i = this.transforms.length - 1; i >= 0; i--) {\n        this.transforms[i].unapply(ctx);\n      }\n    }\n\n    applyToPoint (p) {\n      this.transforms.forEach((transform) => {\n        transform.applyToPoint(p);\n      });\n    }\n  };\n\n  // aspect ratio\n  svg.AspectRatio = function (ctx, aspectRatio, width, desiredWidth, height, desiredHeight, minX, minY, refX, refY) {\n    // aspect ratio - https://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n    aspectRatio = svg.compressSpaces(aspectRatio);\n    aspectRatio = aspectRatio.replace(/^defer\\s/, ''); // ignore defer\n    const align = aspectRatio.split(' ')[0] || 'xMidYMid';\n    const meetOrSlice = aspectRatio.split(' ')[1] || 'meet';\n\n    // calculate scale\n    const scaleX = width / desiredWidth;\n    const scaleY = height / desiredHeight;\n    const scaleMin = Math.min(scaleX, scaleY);\n    const scaleMax = Math.max(scaleX, scaleY);\n    if (meetOrSlice === 'meet') { desiredWidth *= scaleMin; desiredHeight *= scaleMin; }\n    if (meetOrSlice === 'slice') { desiredWidth *= scaleMax; desiredHeight *= scaleMax; }\n\n    refX = new svg.Property('refX', refX);\n    refY = new svg.Property('refY', refY);\n    if (refX.hasValue() && refY.hasValue()) {\n      ctx.translate(-scaleMin * refX.toPixels('x'), -scaleMin * refY.toPixels('y'));\n    } else {\n      // align\n      if (align.startsWith('xMid') &&\n        ((meetOrSlice === 'meet' && scaleMin === scaleY) || (meetOrSlice === 'slice' && scaleMax === scaleY))) {\n        ctx.translate(width / 2.0 - desiredWidth / 2.0, 0);\n      }\n      if (align.endsWith('YMid') &&\n        ((meetOrSlice === 'meet' && scaleMin === scaleX) || (meetOrSlice === 'slice' && scaleMax === scaleX))) {\n        ctx.translate(0, height / 2.0 - desiredHeight / 2.0);\n      }\n      if (align.startsWith('xMax') &&\n        ((meetOrSlice === 'meet' && scaleMin === scaleY) || (meetOrSlice === 'slice' && scaleMax === scaleY))) {\n        ctx.translate(width - desiredWidth, 0);\n      }\n      if (align.endsWith('YMax') &&\n        ((meetOrSlice === 'meet' && scaleMin === scaleX) ||\n          (meetOrSlice === 'slice' && scaleMax === scaleX)\n        )\n      ) {\n        ctx.translate(0, height - desiredHeight);\n      }\n    }\n\n    // scale\n    if (align === 'none') ctx.scale(scaleX, scaleY);\n    else if (meetOrSlice === 'meet') ctx.scale(scaleMin, scaleMin);\n    else if (meetOrSlice === 'slice') ctx.scale(scaleMax, scaleMax);\n\n    // translate\n    ctx.translate(isNullish(minX) ? 0 : -minX, isNullish(minY) ? 0 : -minY);\n  };\n\n  // elements\n  svg.Element = {};\n\n  svg.EmptyProperty = new svg.Property('EMPTY', '');\n\n  svg.Element.ElementBase = class {\n    constructor (node) {\n      // Argument from inheriting class\n      this.captureTextNodes = arguments[1]; // eslint-disable-line prefer-rest-params\n      this.attributes = {};\n      this.styles = {};\n      this.children = [];\n      if (!isNullish(node) && node.nodeType === 1) { // ELEMENT_NODE\n        // add children\n        [...node.childNodes].forEach((childNode) => {\n          if (childNode.nodeType === 1) {\n            this.addChild(childNode, true); // ELEMENT_NODE\n          }\n          if (this.captureTextNodes && (\n            childNode.nodeType === 3 || childNode.nodeType === 4\n          )) {\n            const text = childNode.nodeValue || childNode.text || '';\n            if (svg.trim(svg.compressSpaces(text)) !== '') {\n              this.addChild(new svg.Element.tspan(childNode), false); // TEXT_NODE\n            }\n          }\n        });\n\n        // add attributes\n        [...node.attributes].forEach(({nodeName, nodeValue}) => {\n          this.attributes[nodeName] = new svg.Property(\n            nodeName,\n            nodeValue\n          );\n        });\n        // add tag styles\n        let styles = svg.Styles[node.nodeName];\n        if (!isNullish(styles)) {\n          Object.entries(styles).forEach(([name, styleValue]) => {\n            this.styles[name] = styleValue;\n          });\n        }\n\n        // add class styles\n        if (this.attribute('class').hasValue()) {\n          const classes = svg.compressSpaces(this.attribute('class').value).split(' ');\n          classes.forEach((clss) => {\n            styles = svg.Styles['.' + clss];\n            if (!isNullish(styles)) {\n              Object.entries(styles).forEach(([name, styleValue]) => {\n                this.styles[name] = styleValue;\n              });\n            }\n            styles = svg.Styles[node.nodeName + '.' + clss];\n            if (!isNullish(styles)) {\n              Object.entries(styles).forEach(([name, styleValue]) => {\n                this.styles[name] = styleValue;\n              });\n            }\n          });\n        }\n\n        // add id styles\n        if (this.attribute('id').hasValue()) {\n          const _styles = svg.Styles['#' + this.attribute('id').value];\n          if (!isNullish(_styles)) {\n            Object.entries(_styles).forEach(([name, styleValue]) => {\n              this.styles[name] = styleValue;\n            });\n          }\n        }\n\n        // add inline styles\n        if (this.attribute('style').hasValue()) {\n          const _styles = this.attribute('style').value.split(';');\n          _styles.forEach((style) => {\n            if (svg.trim(style) !== '') {\n              let {name, value} = style.split(':');\n              name = svg.trim(name);\n              value = svg.trim(value);\n              this.styles[name] = new svg.Property(name, value);\n            }\n          });\n        }\n\n        // add id\n        if (this.attribute('id').hasValue()) {\n          if (isNullish(svg.Definitions[this.attribute('id').value])) {\n            svg.Definitions[this.attribute('id').value] = this;\n          }\n        }\n      }\n    }\n\n    // get or create attribute\n    attribute (name, createIfNotExists) {\n      let a = this.attributes[name];\n      if (!isNullish(a)) return a;\n\n      if (createIfNotExists === true) { a = new svg.Property(name, ''); this.attributes[name] = a; }\n      return a || svg.EmptyProperty;\n    }\n\n    getHrefAttribute () {\n      for (const a in this.attributes) {\n        if (a.endsWith(':href')) {\n          return this.attributes[a];\n        }\n      }\n      return svg.EmptyProperty;\n    }\n\n    // get or create style, crawls up node tree\n    style (name, createIfNotExists, skipAncestors) {\n      let s = this.styles[name];\n      if (!isNullish(s)) return s;\n\n      const a = this.attribute(name);\n      if (!isNullish(a) && a.hasValue()) {\n        this.styles[name] = a; // move up to me to cache\n        return a;\n      }\n\n      if (skipAncestors !== true) {\n        const p = this.parent;\n        if (!isNullish(p)) {\n          const ps = p.style(name);\n          if (!isNullish(ps) && ps.hasValue()) {\n            return ps;\n          }\n        }\n      }\n\n      if (createIfNotExists === true) { s = new svg.Property(name, ''); this.styles[name] = s; }\n      return s || svg.EmptyProperty;\n    }\n\n    // base render\n    render (ctx) {\n      // don't render display=none\n      if (this.style('display').value === 'none') return;\n\n      // don't render visibility=hidden\n      if (this.style('visibility').value === 'hidden') return;\n\n      ctx.save();\n      if (this.attribute('mask').hasValue()) { // mask\n        const mask = this.attribute('mask').getDefinition();\n        if (!isNullish(mask)) mask.apply(ctx, this);\n      } else if (this.style('filter').hasValue()) { // filter\n        const filter = this.style('filter').getDefinition();\n        if (!isNullish(filter)) filter.apply(ctx, this);\n      } else {\n        this.setContext(ctx);\n        this.renderChildren(ctx);\n        this.clearContext(ctx);\n      }\n      ctx.restore();\n    }\n\n    // base set context\n    setContext (ctx) {\n      // OVERRIDE ME!\n    }\n\n    // base clear context\n    clearContext (ctx) {\n      // OVERRIDE ME!\n    }\n\n    // base render children\n    renderChildren (ctx) {\n      this.children.forEach((child) => {\n        child.render(ctx);\n      });\n    }\n\n    addChild (childNode, create) {\n      const child = create\n        ? svg.CreateElement(childNode)\n        : childNode;\n      child.parent = this;\n      if (child.type !== 'title') { this.children.push(child); }\n    }\n  };\n\n  svg.Element.RenderedElementBase = class extends svg.Element.ElementBase {\n    setContext (ctx) {\n      // fill\n      if (this.style('fill').isUrlDefinition()) {\n        const fs = this.style('fill').getFillStyleDefinition(this, this.style('fill-opacity'));\n        if (!isNullish(fs)) ctx.fillStyle = fs;\n      } else if (this.style('fill').hasValue()) {\n        const fillStyle = this.style('fill');\n        if (fillStyle.value === 'currentColor') fillStyle.value = this.style('color').value;\n        ctx.fillStyle = (fillStyle.value === 'none' ? 'rgba(0,0,0,0)' : fillStyle.value);\n      }\n      if (this.style('fill-opacity').hasValue()) {\n        let fillStyle = new svg.Property('fill', ctx.fillStyle);\n        fillStyle = fillStyle.addOpacity(this.style('fill-opacity'));\n        ctx.fillStyle = fillStyle.value;\n      }\n\n      // stroke\n      if (this.style('stroke').isUrlDefinition()) {\n        const fs = this.style('stroke').getFillStyleDefinition(this, this.style('stroke-opacity'));\n        if (!isNullish(fs)) ctx.strokeStyle = fs;\n      } else if (this.style('stroke').hasValue()) {\n        const strokeStyle = this.style('stroke');\n        if (strokeStyle.value === 'currentColor') strokeStyle.value = this.style('color').value;\n        ctx.strokeStyle = (strokeStyle.value === 'none' ? 'rgba(0,0,0,0)' : strokeStyle.value);\n      }\n      if (this.style('stroke-opacity').hasValue()) {\n        let strokeStyle = new svg.Property('stroke', ctx.strokeStyle);\n        strokeStyle = strokeStyle.addOpacity(this.style('stroke-opacity'));\n        ctx.strokeStyle = strokeStyle.value;\n      }\n      if (this.style('stroke-width').hasValue()) {\n        const newLineWidth = this.style('stroke-width').toPixels();\n        ctx.lineWidth = newLineWidth === 0 ? 0.001 : newLineWidth; // browsers don't respect 0\n      }\n      if (this.style('stroke-linecap').hasValue()) ctx.lineCap = this.style('stroke-linecap').value;\n      if (this.style('stroke-linejoin').hasValue()) ctx.lineJoin = this.style('stroke-linejoin').value;\n      if (this.style('stroke-miterlimit').hasValue()) ctx.miterLimit = this.style('stroke-miterlimit').value;\n      if (this.style('stroke-dasharray').hasValue() && this.style('stroke-dasharray').value !== 'none') {\n        const gaps = svg.ToNumberArray(this.style('stroke-dasharray').value);\n        if (typeof ctx.setLineDash !== 'undefined') {\n          ctx.setLineDash(gaps);\n        } else if (typeof ctx.webkitLineDash !== 'undefined') {\n          ctx.webkitLineDash = gaps;\n        } else if (typeof ctx.mozDash !== 'undefined' && !(gaps.length === 1 && gaps[0] === 0)) {\n          ctx.mozDash = gaps;\n        }\n\n        const offset = this.style('stroke-dashoffset').numValueOrDefault(1);\n        if (typeof ctx.lineDashOffset !== 'undefined') {\n          ctx.lineDashOffset = offset;\n        } else if (typeof ctx.webkitLineDashOffset !== 'undefined') {\n          ctx.webkitLineDashOffset = offset;\n        } else if (typeof ctx.mozDashOffset !== 'undefined') {\n          ctx.mozDashOffset = offset;\n        }\n      }\n\n      // font\n      if (typeof ctx.font !== 'undefined') {\n        ctx.font = svg.Font.CreateFont(\n          this.style('font-style').value,\n          this.style('font-variant').value,\n          this.style('font-weight').value,\n          this.style('font-size').hasValue() ? this.style('font-size').toPixels() + 'px' : '',\n          this.style('font-family').value\n        ).toString();\n      }\n\n      // transform\n      if (this.attribute('transform').hasValue()) {\n        const transform = new svg.Transform(this.attribute('transform').value);\n        transform.apply(ctx);\n      }\n\n      // clip\n      if (this.style('clip-path', false, true).hasValue()) {\n        const clip = this.style('clip-path', false, true).getDefinition();\n        if (!isNullish(clip)) clip.apply(ctx);\n      }\n\n      // opacity\n      if (this.style('opacity').hasValue()) {\n        ctx.globalAlpha = this.style('opacity').numValue();\n      }\n    }\n  };\n\n  svg.Element.PathElementBase = class extends svg.Element.RenderedElementBase {\n    path (ctx) {\n      if (!isNullish(ctx)) ctx.beginPath();\n      return new svg.BoundingBox();\n    }\n\n    renderChildren (ctx) {\n      this.path(ctx);\n      svg.Mouse.checkPath(this, ctx);\n      if (ctx.fillStyle !== '') {\n        if (this.style('fill-rule').valueOrDefault('inherit') !== 'inherit') {\n          ctx.fill(this.style('fill-rule').value);\n        } else {\n          ctx.fill();\n        }\n      }\n      if (ctx.strokeStyle !== '') ctx.stroke();\n\n      const markers = this.getMarkers();\n      if (!isNullish(markers)) {\n        if (this.style('marker-start').isUrlDefinition()) {\n          const marker = this.style('marker-start').getDefinition();\n          marker.render(ctx, markers[0][0], markers[0][1]);\n        }\n        if (this.style('marker-mid').isUrlDefinition()) {\n          const marker = this.style('marker-mid').getDefinition();\n          for (let i = 1; i < markers.length - 1; i++) {\n            marker.render(ctx, markers[i][0], markers[i][1]);\n          }\n        }\n        if (this.style('marker-end').isUrlDefinition()) {\n          const marker = this.style('marker-end').getDefinition();\n          marker.render(ctx, markers[markers.length - 1][0], markers[markers.length - 1][1]);\n        }\n      }\n    }\n\n    getBoundingBox () {\n      return this.path();\n    }\n\n    getMarkers () {\n      return null;\n    }\n  };\n\n  // svg element\n  svg.Element.svg = class extends svg.Element.RenderedElementBase {\n    clearContext (ctx) {\n      super.clearContext(ctx);\n      svg.ViewPort.RemoveCurrent();\n    }\n\n    setContext (ctx) {\n      // initial values and defaults\n      ctx.strokeStyle = 'rgba(0,0,0,0)';\n      ctx.lineCap = 'butt';\n      ctx.lineJoin = 'miter';\n      ctx.miterLimit = 4;\n      if (typeof ctx.font !== 'undefined' && typeof window.getComputedStyle !== 'undefined') {\n        ctx.font = window.getComputedStyle(ctx.canvas).getPropertyValue('font');\n      }\n\n      super.setContext(ctx);\n\n      // create new view port\n      if (!this.attribute('x').hasValue()) this.attribute('x', true).value = 0;\n      if (!this.attribute('y').hasValue()) this.attribute('y', true).value = 0;\n      ctx.translate(this.attribute('x').toPixels('x'), this.attribute('y').toPixels('y'));\n\n      let width = svg.ViewPort.width();\n      let height = svg.ViewPort.height();\n\n      if (!this.attribute('width').hasValue()) this.attribute('width', true).value = '100%';\n      if (!this.attribute('height').hasValue()) this.attribute('height', true).value = '100%';\n      if (typeof this.root === 'undefined') {\n        width = this.attribute('width').toPixels('x');\n        height = this.attribute('height').toPixels('y');\n\n        let x = 0;\n        let y = 0;\n        if (this.attribute('refX').hasValue() && this.attribute('refY').hasValue()) {\n          x = -this.attribute('refX').toPixels('x');\n          y = -this.attribute('refY').toPixels('y');\n        }\n\n        if (this.attribute('overflow').valueOrDefault('hidden') !== 'visible') {\n          ctx.beginPath();\n          ctx.moveTo(x, y);\n          ctx.lineTo(width, y);\n          ctx.lineTo(width, height);\n          ctx.lineTo(x, height);\n          ctx.closePath();\n          ctx.clip();\n        }\n      }\n      svg.ViewPort.SetCurrent(width, height);\n\n      // viewbox\n      if (this.attribute('viewBox').hasValue()) {\n        const viewBox = svg.ToNumberArray(this.attribute('viewBox').value);\n        const minX = viewBox[0];\n        const minY = viewBox[1];\n        width = viewBox[2];\n        height = viewBox[3];\n\n        svg.AspectRatio(\n          ctx,\n          this.attribute('preserveAspectRatio').value,\n          svg.ViewPort.width(),\n          width,\n          svg.ViewPort.height(),\n          height,\n          minX,\n          minY,\n          this.attribute('refX').value,\n          this.attribute('refY').value\n        );\n\n        svg.ViewPort.RemoveCurrent();\n        svg.ViewPort.SetCurrent(viewBox[2], viewBox[3]);\n      }\n    }\n  };\n\n  // rect element\n  svg.Element.rect = class extends svg.Element.PathElementBase {\n    path (ctx) {\n      const x = this.attribute('x').toPixels('x');\n      const y = this.attribute('y').toPixels('y');\n      const width = this.attribute('width').toPixels('x');\n      const height = this.attribute('height').toPixels('y');\n      let rx = this.attribute('rx').toPixels('x');\n      let ry = this.attribute('ry').toPixels('y');\n      if (this.attribute('rx').hasValue() && !this.attribute('ry').hasValue()) ry = rx;\n      if (this.attribute('ry').hasValue() && !this.attribute('rx').hasValue()) rx = ry;\n      rx = Math.min(rx, width / 2.0);\n      ry = Math.min(ry, height / 2.0);\n      if (!isNullish(ctx)) {\n        ctx.beginPath();\n        ctx.moveTo(x + rx, y);\n        ctx.lineTo(x + width - rx, y);\n        ctx.quadraticCurveTo(x + width, y, x + width, y + ry);\n        ctx.lineTo(x + width, y + height - ry);\n        ctx.quadraticCurveTo(x + width, y + height, x + width - rx, y + height);\n        ctx.lineTo(x + rx, y + height);\n        ctx.quadraticCurveTo(x, y + height, x, y + height - ry);\n        ctx.lineTo(x, y + ry);\n        ctx.quadraticCurveTo(x, y, x + rx, y);\n        ctx.closePath();\n      }\n\n      return new svg.BoundingBox(x, y, x + width, y + height);\n    }\n  };\n\n  // circle element\n  svg.Element.circle = class extends svg.Element.PathElementBase {\n    path (ctx) {\n      const cx = this.attribute('cx').toPixels('x');\n      const cy = this.attribute('cy').toPixels('y');\n      const r = this.attribute('r').toPixels();\n\n      if (!isNullish(ctx)) {\n        ctx.beginPath();\n        ctx.arc(cx, cy, r, 0, Math.PI * 2, true);\n        ctx.closePath();\n      }\n\n      return new svg.BoundingBox(cx - r, cy - r, cx + r, cy + r);\n    }\n  };\n\n  // ellipse element\n  const KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n  svg.Element.ellipse = class extends svg.Element.PathElementBase {\n    path (ctx) {\n      const rx = this.attribute('rx').toPixels('x');\n      const ry = this.attribute('ry').toPixels('y');\n      const cx = this.attribute('cx').toPixels('x');\n      const cy = this.attribute('cy').toPixels('y');\n\n      if (!isNullish(ctx)) {\n        ctx.beginPath();\n        ctx.moveTo(cx, cy - ry);\n        ctx.bezierCurveTo(cx + (KAPPA * rx), cy - ry, cx + rx, cy - (KAPPA * ry), cx + rx, cy);\n        ctx.bezierCurveTo(cx + rx, cy + (KAPPA * ry), cx + (KAPPA * rx), cy + ry, cx, cy + ry);\n        ctx.bezierCurveTo(cx - (KAPPA * rx), cy + ry, cx - rx, cy + (KAPPA * ry), cx - rx, cy);\n        ctx.bezierCurveTo(cx - rx, cy - (KAPPA * ry), cx - (KAPPA * rx), cy - ry, cx, cy - ry);\n        ctx.closePath();\n      }\n\n      return new svg.BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);\n    }\n  };\n\n  // line element\n  svg.Element.line = class extends svg.Element.PathElementBase {\n    getPoints () {\n      return [\n        new svg.Point(this.attribute('x1').toPixels('x'), this.attribute('y1').toPixels('y')),\n        new svg.Point(this.attribute('x2').toPixels('x'), this.attribute('y2').toPixels('y'))\n      ];\n    }\n\n    path (ctx) {\n      const points = this.getPoints();\n\n      if (!isNullish(ctx)) {\n        ctx.beginPath();\n        ctx.moveTo(points[0].x, points[0].y);\n        ctx.lineTo(points[1].x, points[1].y);\n      }\n\n      return new svg.BoundingBox(points[0].x, points[0].y, points[1].x, points[1].y);\n    }\n\n    getMarkers () {\n      const points = this.getPoints();\n      const a = points[0].angleTo(points[1]);\n      return [[points[0], a], [points[1], a]];\n    }\n  };\n\n  // polyline element\n  svg.Element.polyline = class extends svg.Element.PathElementBase {\n    constructor (node) {\n      super(node);\n\n      this.points = svg.CreatePath(this.attribute('points').value);\n    }\n    path (ctx) {\n      const {x, y} = this.points[0];\n      const bb = new svg.BoundingBox(x, y);\n      if (!isNullish(ctx)) {\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n      }\n      for (let i = 1; i < this.points.length; i++) {\n        const {x: _x, y: _y} = this.points[i];\n        bb.addPoint(_x, _y);\n        if (!isNullish(ctx)) ctx.lineTo(_x, _y);\n      }\n      return bb;\n    }\n\n    getMarkers () {\n      const markers = [];\n      for (let i = 0; i < this.points.length - 1; i++) {\n        markers.push([this.points[i], this.points[i].angleTo(this.points[i + 1])]);\n      }\n      markers.push([this.points[this.points.length - 1], markers[markers.length - 1][1]]);\n      return markers;\n    }\n  };\n\n  // polygon element\n  svg.Element.polygon = class extends svg.Element.polyline {\n    path (ctx) {\n      const bb = super.path(ctx);\n      if (!isNullish(ctx)) {\n        ctx.lineTo(this.points[0].x, this.points[0].y);\n        ctx.closePath();\n      }\n      return bb;\n    }\n  };\n\n  // path element\n  svg.Element.path = class extends svg.Element.PathElementBase {\n    constructor (node) {\n      super(node);\n\n      let d = this.attribute('d').value\n      // TODO: convert to real lexer based on https://www.w3.org/TR/SVG11/paths.html#PathDataBNF\n        .replace(/,/gm, ' ') // get rid of all commas\n        .replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm, '$1 $2') // separate commands from commands\n        .replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm, '$1 $2') // separate commands from commands\n        .replace(/([MmZzLlHhVvCcSsQqTtAa])(\\S)/gm, '$1 $2') // separate commands from points\n        .replace(/(\\S)([MmZzLlHhVvCcSsQqTtAa])/gm, '$1 $2') // separate commands from points\n        .replace(/(\\d)([+-])/gm, '$1 $2') // separate digits when no comma\n        .replace(/(\\.\\d*)(\\.)/gm, '$1 $2') // separate digits when no comma\n        .replace(/([Aa](\\s+\\d+)(\\s+\\d+)(\\s+\\d+))\\s+([01])\\s*([01])/gm, '$1 $5 $6 '); // shorthand elliptical arc path syntax\n      d = svg.compressSpaces(d); // compress multiple spaces\n      d = svg.trim(d);\n      this.PathParser = {\n        tokens: d.split(' '),\n\n        reset () {\n          this.i = -1;\n          this.command = '';\n          this.previousCommand = '';\n          this.start = new svg.Point(0, 0);\n          this.control = new svg.Point(0, 0);\n          this.current = new svg.Point(0, 0);\n          this.points = [];\n          this.angles = [];\n        },\n\n        isEnd () {\n          return this.i >= this.tokens.length - 1;\n        },\n\n        isCommandOrEnd () {\n          if (this.isEnd()) return true;\n          return !isNullish(this.tokens[this.i + 1].match(/^[A-Za-z]$/));\n        },\n\n        isRelativeCommand () {\n          switch (this.command) {\n          case 'm':\n          case 'l':\n          case 'h':\n          case 'v':\n          case 'c':\n          case 's':\n          case 'q':\n          case 't':\n          case 'a':\n          case 'z':\n            return true;\n          }\n          return false;\n        },\n\n        getToken () {\n          this.i++;\n          return this.tokens[this.i];\n        },\n\n        getScalar () {\n          return Number.parseFloat(this.getToken());\n        },\n\n        nextCommand () {\n          this.previousCommand = this.command;\n          this.command = this.getToken();\n        },\n\n        getPoint () {\n          const p = new svg.Point(this.getScalar(), this.getScalar());\n          return this.makeAbsolute(p);\n        },\n\n        getAsControlPoint () {\n          const p = this.getPoint();\n          this.control = p;\n          return p;\n        },\n\n        getAsCurrentPoint () {\n          const p = this.getPoint();\n          this.current = p;\n          return p;\n        },\n\n        getReflectedControlPoint () {\n          if (this.previousCommand.toLowerCase() !== 'c' &&\n            this.previousCommand.toLowerCase() !== 's' &&\n            this.previousCommand.toLowerCase() !== 'q' &&\n            this.previousCommand.toLowerCase() !== 't') {\n            return this.current;\n          }\n\n          // reflect point\n          const p = new svg.Point(2 * this.current.x - this.control.x, 2 * this.current.y - this.control.y);\n          return p;\n        },\n\n        makeAbsolute (p) {\n          if (this.isRelativeCommand()) {\n            p.x += this.current.x;\n            p.y += this.current.y;\n          }\n          return p;\n        },\n\n        addMarker (p, from, priorTo) {\n          // if the last angle isn't filled in because we didn't have this point yet ...\n          if (!isNullish(priorTo) && this.angles.length > 0 && isNullish(this.angles[this.angles.length - 1])) {\n            this.angles[this.angles.length - 1] = this.points[this.points.length - 1].angleTo(priorTo);\n          }\n          this.addMarkerAngle(p, isNullish(from) ? null : from.angleTo(p));\n        },\n\n        addMarkerAngle (p, a) {\n          this.points.push(p);\n          this.angles.push(a);\n        },\n\n        getMarkerPoints () { return this.points; },\n        getMarkerAngles () {\n          for (let i = 0; i < this.angles.length; i++) {\n            if (isNullish(this.angles[i])) {\n              for (let j = i + 1; j < this.angles.length; j++) {\n                if (!isNullish(this.angles[j])) {\n                  this.angles[i] = this.angles[j];\n                  break;\n                }\n              }\n            }\n          }\n          return this.angles;\n        }\n      };\n    }\n\n    path (ctx) {\n      const pp = this.PathParser;\n      pp.reset();\n\n      const bb = new svg.BoundingBox();\n      if (!isNullish(ctx)) ctx.beginPath();\n      while (!pp.isEnd()) {\n        pp.nextCommand();\n        switch (pp.command) {\n        case 'M':\n        case 'm': {\n          const p = pp.getAsCurrentPoint();\n          pp.addMarker(p);\n          bb.addPoint(p.x, p.y);\n          if (!isNullish(ctx)) ctx.moveTo(p.x, p.y);\n          pp.start = pp.current;\n          while (!pp.isCommandOrEnd()) {\n            const _p = pp.getAsCurrentPoint();\n            pp.addMarker(_p, pp.start);\n            bb.addPoint(_p.x, _p.y);\n            if (!isNullish(ctx)) ctx.lineTo(_p.x, _p.y);\n          }\n          break;\n        } case 'L':\n        case 'l':\n          while (!pp.isCommandOrEnd()) {\n            const c = pp.current;\n            const p = pp.getAsCurrentPoint();\n            pp.addMarker(p, c);\n            bb.addPoint(p.x, p.y);\n            if (!isNullish(ctx)) ctx.lineTo(p.x, p.y);\n          }\n          break;\n        case 'H':\n        case 'h':\n          while (!pp.isCommandOrEnd()) {\n            const newP = new svg.Point((pp.isRelativeCommand() ? pp.current.x : 0) + pp.getScalar(), pp.current.y);\n            pp.addMarker(newP, pp.current);\n            pp.current = newP;\n            bb.addPoint(pp.current.x, pp.current.y);\n            if (!isNullish(ctx)) ctx.lineTo(pp.current.x, pp.current.y);\n          }\n          break;\n        case 'V':\n        case 'v':\n          while (!pp.isCommandOrEnd()) {\n            const newP = new svg.Point(pp.current.x, (pp.isRelativeCommand() ? pp.current.y : 0) + pp.getScalar());\n            pp.addMarker(newP, pp.current);\n            pp.current = newP;\n            bb.addPoint(pp.current.x, pp.current.y);\n            if (!isNullish(ctx)) ctx.lineTo(pp.current.x, pp.current.y);\n          }\n          break;\n        case 'C':\n        case 'c':\n          while (!pp.isCommandOrEnd()) {\n            const curr = pp.current;\n            const p1 = pp.getPoint();\n            const cntrl = pp.getAsControlPoint();\n            const cp = pp.getAsCurrentPoint();\n            pp.addMarker(cp, cntrl, p1);\n            bb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n            if (!isNullish(ctx)) ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n          }\n          break;\n        case 'S':\n        case 's':\n          while (!pp.isCommandOrEnd()) {\n            const curr = pp.current;\n            const p1 = pp.getReflectedControlPoint();\n            const cntrl = pp.getAsControlPoint();\n            const cp = pp.getAsCurrentPoint();\n            pp.addMarker(cp, cntrl, p1);\n            bb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n            if (!isNullish(ctx)) ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n          }\n          break;\n        case 'Q':\n        case 'q':\n          while (!pp.isCommandOrEnd()) {\n            const curr = pp.current;\n            const cntrl = pp.getAsControlPoint();\n            const cp = pp.getAsCurrentPoint();\n            pp.addMarker(cp, cntrl, cntrl);\n            bb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);\n            if (!isNullish(ctx)) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);\n          }\n          break;\n        case 'T':\n        case 't':\n          while (!pp.isCommandOrEnd()) {\n            const curr = pp.current;\n            const cntrl = pp.getReflectedControlPoint();\n            pp.control = cntrl;\n            const cp = pp.getAsCurrentPoint();\n            pp.addMarker(cp, cntrl, cntrl);\n            bb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);\n            if (!isNullish(ctx)) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);\n          }\n          break;\n        case 'A':\n        case 'a':\n          while (!pp.isCommandOrEnd()) {\n            const curr = pp.current;\n            let rx = pp.getScalar();\n            let ry = pp.getScalar();\n            const xAxisRotation = pp.getScalar() * (Math.PI / 180.0);\n            const largeArcFlag = pp.getScalar();\n            const sweepFlag = pp.getScalar();\n            const cp = pp.getAsCurrentPoint();\n\n            // Conversion from endpoint to center parameterization\n            // https://www.w3.org/TR/SVG11/implnote.html#ArcConversionEndpointToCenter\n\n            // x1', y1'\n            const currp = new svg.Point(\n              Math.cos(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.sin(xAxisRotation) * (curr.y - cp.y) / 2.0,\n              -Math.sin(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.cos(xAxisRotation) * (curr.y - cp.y) / 2.0\n            );\n            // adjust radii\n            const l = (currp.x ** 2) / (rx ** 2) + (currp.y ** 2) / (ry ** 2);\n            if (l > 1) {\n              rx *= Math.sqrt(l);\n              ry *= Math.sqrt(l);\n            }\n            // cx', cy'\n            let s = (largeArcFlag === sweepFlag ? -1 : 1) * Math.sqrt(\n              (((rx ** 2) * (ry ** 2)) - ((rx ** 2) * (currp.y ** 2)) - ((ry ** 2) * (currp.x ** 2))) /\n              ((rx ** 2) * (currp.y ** 2) + (ry ** 2) * (currp.x ** 2))\n            );\n            if (isNaN(s)) s = 0;\n            const cpp = new svg.Point(s * rx * currp.y / ry, s * -ry * currp.x / rx);\n            // cx, cy\n            const centp = new svg.Point(\n              (curr.x + cp.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y,\n              (curr.y + cp.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y\n            );\n            // vector magnitude\n            const m = function (v) {\n              return Math.sqrt((v[0] ** 2) + (v[1] ** 2));\n            };\n            // ratio between two vectors\n            const r = function (u, v) {\n              return (u[0] * v[0] + u[1] * v[1]) / (m(u) * m(v));\n            };\n            // angle between two vectors\n            const a = function (u, v) {\n              return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(r(u, v));\n            };\n            // initial angle\n            const a1 = a([1, 0], [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry]);\n            // angle delta\n            const u = [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry];\n            const v = [(-currp.x - cpp.x) / rx, (-currp.y - cpp.y) / ry];\n            let ad = a(u, v);\n            if (r(u, v) <= -1) ad = Math.PI;\n            if (r(u, v) >= 1) ad = 0;\n\n            // for markers\n            const dir = 1 - sweepFlag ? 1.0 : -1.0;\n            const ah = a1 + dir * (ad / 2.0);\n            const halfWay = new svg.Point(\n              centp.x + rx * Math.cos(ah),\n              centp.y + ry * Math.sin(ah)\n            );\n            pp.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\n            pp.addMarkerAngle(cp, ah - dir * Math.PI);\n\n            bb.addPoint(cp.x, cp.y); // TODO: this is too naive, make it better\n            if (!isNullish(ctx)) {\n              const _r = rx > ry ? rx : ry;\n              const sx = rx > ry ? 1 : rx / ry;\n              const sy = rx > ry ? ry / rx : 1;\n\n              ctx.translate(centp.x, centp.y);\n              ctx.rotate(xAxisRotation);\n              ctx.scale(sx, sy);\n              ctx.arc(0, 0, _r, a1, a1 + ad, 1 - sweepFlag);\n              ctx.scale(1 / sx, 1 / sy);\n              ctx.rotate(-xAxisRotation);\n              ctx.translate(-centp.x, -centp.y);\n            }\n          }\n          break;\n        case 'Z':\n        case 'z':\n          if (!isNullish(ctx)) ctx.closePath();\n          pp.current = pp.start;\n        }\n      }\n\n      return bb;\n    }\n\n    getMarkers () {\n      const points = this.PathParser.getMarkerPoints();\n      const angles = this.PathParser.getMarkerAngles();\n\n      const markers = points.map((point, i) => {\n        return [point, angles[i]];\n      });\n      return markers;\n    }\n  };\n\n  // pattern element\n  svg.Element.pattern = class extends svg.Element.ElementBase {\n    createPattern (ctx, element) {\n      const width = this.attribute('width').toPixels('x', true);\n      const height = this.attribute('height').toPixels('y', true);\n\n      // render me using a temporary svg element\n      const tempSvg = new svg.Element.svg();\n      tempSvg.attributes.viewBox = new svg.Property('viewBox', this.attribute('viewBox').value);\n      tempSvg.attributes.width = new svg.Property('width', width + 'px');\n      tempSvg.attributes.height = new svg.Property('height', height + 'px');\n      tempSvg.attributes.transform = new svg.Property('transform', this.attribute('patternTransform').value);\n      tempSvg.children = this.children;\n\n      const c = document.createElement('canvas');\n      c.width = width;\n      c.height = height;\n      const cctx = c.getContext('2d');\n      if (this.attribute('x').hasValue() && this.attribute('y').hasValue()) {\n        cctx.translate(this.attribute('x').toPixels('x', true), this.attribute('y').toPixels('y', true));\n      }\n      // render 3x3 grid so when we transform there's no white space on edges\n      for (let x = -1; x <= 1; x++) {\n        for (let y = -1; y <= 1; y++) {\n          cctx.save();\n          cctx.translate(x * c.width, y * c.height);\n          tempSvg.render(cctx);\n          cctx.restore();\n        }\n      }\n      const pattern = ctx.createPattern(c, 'repeat');\n      return pattern;\n    }\n  };\n\n  // marker element\n  svg.Element.marker = class extends svg.Element.ElementBase {\n    render (ctx, point, angle) {\n      ctx.translate(point.x, point.y);\n      if (this.attribute('orient').valueOrDefault('auto') === 'auto') ctx.rotate(angle);\n      if (this.attribute('markerUnits').valueOrDefault('strokeWidth') === 'strokeWidth') ctx.scale(ctx.lineWidth, ctx.lineWidth);\n      ctx.save();\n\n      // render me using a temporary svg element\n      const tempSvg = new svg.Element.svg();\n      tempSvg.attributes.viewBox = new svg.Property(\n        'viewBox', this.attribute('viewBox').value\n      );\n      tempSvg.attributes.refX = new svg.Property(\n        'refX', this.attribute('refX').value\n      );\n      tempSvg.attributes.refY = new svg.Property(\n        'refY', this.attribute('refY').value\n      );\n      tempSvg.attributes.width = new svg.Property(\n        'width', this.attribute('markerWidth').value\n      );\n      tempSvg.attributes.height = new svg.Property(\n        'height', this.attribute('markerHeight').value\n      );\n      tempSvg.attributes.fill = new svg.Property(\n        'fill', this.attribute('fill').valueOrDefault('black')\n      );\n      tempSvg.attributes.stroke = new svg.Property(\n        'stroke', this.attribute('stroke').valueOrDefault('none')\n      );\n      tempSvg.children = this.children;\n      tempSvg.render(ctx);\n\n      ctx.restore();\n      if (this.attribute('markerUnits').valueOrDefault('strokeWidth') ===\n        'strokeWidth'\n      ) ctx.scale(1 / ctx.lineWidth, 1 / ctx.lineWidth);\n      if (this.attribute('orient').valueOrDefault('auto') === 'auto') {\n        ctx.rotate(-angle);\n      }\n      ctx.translate(-point.x, -point.y);\n    }\n  };\n\n  // definitions element\n  svg.Element.defs = class extends svg.Element.ElementBase {\n    render (ctx) {\n      // NOOP\n    }\n  };\n\n  // base for gradients\n  svg.Element.GradientBase = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super(node);\n\n      this.gradientUnits = this.attribute('gradientUnits').valueOrDefault('objectBoundingBox');\n\n      this.stops = [];\n      this.children.forEach((child) => {\n        if (child.type === 'stop') {\n          this.stops.push(child);\n        }\n      });\n    }\n\n    getGradient () {\n      // OVERRIDE ME!\n    }\n\n    createGradient (ctx, element, parentOpacityProp) {\n      const stopsContainer = this.getHrefAttribute().hasValue()\n        ? this.getHrefAttribute().getDefinition()\n        : this;\n\n      const addParentOpacity = function (color) {\n        if (parentOpacityProp.hasValue()) {\n          const p = new svg.Property('color', color);\n          return p.addOpacity(parentOpacityProp).value;\n        }\n        return color;\n      };\n\n      const g = this.getGradient(ctx, element);\n      if (isNullish(g)) return addParentOpacity(stopsContainer.stops[stopsContainer.stops.length - 1].color);\n      stopsContainer.stops.forEach(({offset, color}) => {\n        g.addColorStop(offset, addParentOpacity(color));\n      });\n\n      if (this.attribute('gradientTransform').hasValue()) {\n        // render as transformed pattern on temporary canvas\n        const rootView = svg.ViewPort.viewPorts[0];\n\n        const rect = new svg.Element.rect();\n        rect.attributes.x = new svg.Property('x', -svg.MAX_VIRTUAL_PIXELS / 3.0);\n        rect.attributes.y = new svg.Property('y', -svg.MAX_VIRTUAL_PIXELS / 3.0);\n        rect.attributes.width = new svg.Property('width', svg.MAX_VIRTUAL_PIXELS);\n        rect.attributes.height = new svg.Property('height', svg.MAX_VIRTUAL_PIXELS);\n\n        const group = new svg.Element.g();\n        group.attributes.transform = new svg.Property('transform', this.attribute('gradientTransform').value);\n        group.children = [rect];\n\n        const tempSvg = new svg.Element.svg();\n        tempSvg.attributes.x = new svg.Property('x', 0);\n        tempSvg.attributes.y = new svg.Property('y', 0);\n        tempSvg.attributes.width = new svg.Property('width', rootView.width);\n        tempSvg.attributes.height = new svg.Property('height', rootView.height);\n        tempSvg.children = [group];\n\n        const c = document.createElement('canvas');\n        c.width = rootView.width;\n        c.height = rootView.height;\n        const tempCtx = c.getContext('2d');\n        tempCtx.fillStyle = g;\n        tempSvg.render(tempCtx);\n        return tempCtx.createPattern(c, 'no-repeat');\n      }\n\n      return g;\n    }\n  };\n\n  // linear gradient element\n  svg.Element.linearGradient = class extends svg.Element.GradientBase {\n    getGradient (ctx, element) {\n      const useBB = this.gradientUnits === 'objectBoundingBox' && element.getBoundingBox;\n      const bb = useBB\n        ? element.getBoundingBox()\n        : null;\n\n      if (!this.attribute('x1').hasValue() &&\n        !this.attribute('y1').hasValue() &&\n        !this.attribute('x2').hasValue() &&\n        !this.attribute('y2').hasValue()\n      ) {\n        this.attribute('x1', true).value = 0;\n        this.attribute('y1', true).value = 0;\n        this.attribute('x2', true).value = 1;\n        this.attribute('y2', true).value = 0;\n      }\n\n      const x1 = (useBB\n        ? bb.x() + bb.width() * this.attribute('x1').numValue()\n        : this.attribute('x1').toPixels('x'));\n      const y1 = (useBB\n        ? bb.y() + bb.height() * this.attribute('y1').numValue()\n        : this.attribute('y1').toPixels('y'));\n      const x2 = (useBB\n        ? bb.x() + bb.width() * this.attribute('x2').numValue()\n        : this.attribute('x2').toPixels('x'));\n      const y2 = (useBB\n        ? bb.y() + bb.height() * this.attribute('y2').numValue()\n        : this.attribute('y2').toPixels('y'));\n\n      if (x1 === x2 && y1 === y2) return null;\n      return ctx.createLinearGradient(x1, y1, x2, y2);\n    }\n  };\n\n  // radial gradient element\n  svg.Element.radialGradient = class extends svg.Element.GradientBase {\n    getGradient (ctx, element) {\n      const useBB = this.gradientUnits === 'objectBoundingBox' && element.getBoundingBox;\n      const bb = useBB ? element.getBoundingBox() : null;\n\n      if (!this.attribute('cx').hasValue()) this.attribute('cx', true).value = '50%';\n      if (!this.attribute('cy').hasValue()) this.attribute('cy', true).value = '50%';\n      if (!this.attribute('r').hasValue()) this.attribute('r', true).value = '50%';\n\n      const cx = (useBB\n        ? bb.x() + bb.width() * this.attribute('cx').numValue()\n        : this.attribute('cx').toPixels('x'));\n      const cy = (useBB\n        ? bb.y() + bb.height() * this.attribute('cy').numValue()\n        : this.attribute('cy').toPixels('y'));\n\n      let fx = cx;\n      let fy = cy;\n      if (this.attribute('fx').hasValue()) {\n        fx = (useBB\n          ? bb.x() + bb.width() * this.attribute('fx').numValue()\n          : this.attribute('fx').toPixels('x'));\n      }\n      if (this.attribute('fy').hasValue()) {\n        fy = (useBB\n          ? bb.y() + bb.height() * this.attribute('fy').numValue()\n          : this.attribute('fy').toPixels('y'));\n      }\n\n      const r = (useBB\n        ? (bb.width() + bb.height()) / 2.0 * this.attribute('r').numValue()\n        : this.attribute('r').toPixels());\n\n      return ctx.createRadialGradient(fx, fy, 0, cx, cy, r);\n    }\n  };\n\n  // gradient stop element\n  svg.Element.stop = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super(node);\n\n      this.offset = this.attribute('offset').numValue();\n      if (this.offset < 0) this.offset = 0;\n      if (this.offset > 1) this.offset = 1;\n\n      let stopColor = this.style('stop-color');\n      if (this.style('stop-opacity').hasValue()) {\n        stopColor = stopColor.addOpacity(this.style('stop-opacity'));\n      }\n      this.color = stopColor.value;\n    }\n  };\n\n  // animation base element\n  svg.Element.AnimateBase = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super(node);\n\n      svg.Animations.push(this);\n\n      this.duration = 0.0;\n      this.begin = this.attribute('begin').toMilliseconds();\n      this.maxDuration = this.begin + this.attribute('dur').toMilliseconds();\n\n      this.initialValue = null;\n      this.initialUnits = '';\n      this.removed = false;\n\n      this.from = this.attribute('from');\n      this.to = this.attribute('to');\n      this.values = this.attribute('values');\n      if (this.values.hasValue()) this.values.value = this.values.value.split(';');\n    }\n\n    getProperty () {\n      const attributeType = this.attribute('attributeType').value;\n      const attributeName = this.attribute('attributeName').value;\n\n      if (attributeType === 'CSS') {\n        return this.parent.style(attributeName, true);\n      }\n      return this.parent.attribute(attributeName, true);\n    }\n\n    calcValue () {\n      // OVERRIDE ME!\n      return '';\n    }\n\n    update (delta) {\n      // set initial value\n      if (isNullish(this.initialValue)) {\n        this.initialValue = this.getProperty().value;\n        this.initialUnits = this.getProperty().getUnits();\n      }\n\n      // if we're past the end time\n      if (this.duration > this.maxDuration) {\n        // loop for indefinitely repeating animations\n        if (this.attribute('repeatCount').value === 'indefinite' ||\n          this.attribute('repeatDur').value === 'indefinite') {\n          this.duration = 0.0;\n        } else if (this.attribute('fill').valueOrDefault('remove') === 'freeze' && !this.frozen) {\n          this.frozen = true;\n          this.parent.animationFrozen = true;\n          this.parent.animationFrozenValue = this.getProperty().value;\n        } else if (this.attribute('fill').valueOrDefault('remove') === 'remove' && !this.removed) {\n          this.removed = true;\n          this.getProperty().value = this.parent.animationFrozen ? this.parent.animationFrozenValue : this.initialValue;\n          return true;\n        }\n        return false;\n      }\n      this.duration += delta;\n\n      // if we're past the begin time\n      let updated = false;\n      if (this.begin < this.duration) {\n        let newValue = this.calcValue(); // tween\n\n        if (this.attribute('type').hasValue()) {\n          // for transform, etc.\n          const type = this.attribute('type').value;\n          newValue = type + '(' + newValue + ')';\n        }\n\n        this.getProperty().value = newValue;\n        updated = true;\n      }\n\n      return updated;\n    }\n\n    // fraction of duration we've covered\n    progress () {\n      const ret = {progress: (this.duration - this.begin) / (this.maxDuration - this.begin)};\n      if (this.values.hasValue()) {\n        const p = ret.progress * (this.values.value.length - 1);\n        const lb = Math.floor(p), ub = Math.ceil(p);\n        ret.from = new svg.Property('from', Number.parseFloat(this.values.value[lb]));\n        ret.to = new svg.Property('to', Number.parseFloat(this.values.value[ub]));\n        ret.progress = (p - lb) / (ub - lb);\n      } else {\n        ret.from = this.from;\n        ret.to = this.to;\n      }\n      return ret;\n    }\n  };\n\n  // animate element\n  svg.Element.animate = class extends svg.Element.AnimateBase {\n    calcValue () {\n      const p = this.progress();\n\n      // tween value linearly\n      const newValue = p.from.numValue() + (p.to.numValue() - p.from.numValue()) * p.progress;\n      return newValue + this.initialUnits;\n    }\n  };\n\n  // animate color element\n  svg.Element.animateColor = class extends svg.Element.AnimateBase {\n    calcValue () {\n      const p = this.progress();\n      const from = new RGBColor(p.from.value);\n      const to = new RGBColor(p.to.value);\n\n      if (from.ok && to.ok) {\n        // tween color linearly\n        const r = from.r + (to.r - from.r) * p.progress;\n        const g = from.g + (to.g - from.g) * p.progress;\n        const b = from.b + (to.b - from.b) * p.progress;\n        return 'rgb(' + Number.parseInt(r) + ',' + Number.parseInt(g) + ',' + Number.parseInt(b) + ')';\n      }\n      return this.attribute('from').value;\n    }\n  };\n\n  // animate transform element\n  svg.Element.animateTransform = class extends svg.Element.animate {\n    calcValue () {\n      const p = this.progress();\n\n      // tween value linearly\n      const from = svg.ToNumberArray(p.from.value);\n      const to = svg.ToNumberArray(p.to.value);\n      let newValue = '';\n      from.forEach((fr, i) => {\n        newValue += fr + (to[i] - fr) * p.progress + ' ';\n      });\n      return newValue;\n    }\n  };\n\n  // font element\n  svg.Element.font = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super(node);\n\n      this.horizAdvX = this.attribute('horiz-adv-x').numValue();\n\n      this.isRTL = false;\n      this.isArabic = false;\n      this.fontFace = null;\n      this.missingGlyph = null;\n      this.glyphs = [];\n      this.children.forEach((child) => {\n        if (child.type === 'font-face') {\n          this.fontFace = child;\n          if (child.style('font-family').hasValue()) {\n            svg.Definitions[child.style('font-family').value] = this;\n          }\n        } else if (child.type === 'missing-glyph') {\n          this.missingGlyph = child;\n        } else if (child.type === 'glyph') {\n          if (child.arabicForm !== '') {\n            this.isRTL = true;\n            this.isArabic = true;\n            if (typeof this.glyphs[child.unicode] === 'undefined') {\n              this.glyphs[child.unicode] = [];\n            }\n            this.glyphs[child.unicode][child.arabicForm] = child;\n          } else {\n            this.glyphs[child.unicode] = child;\n          }\n        }\n      });\n    }\n  };\n\n  // font-face element\n  svg.Element.fontface = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super(node);\n\n      this.ascent = this.attribute('ascent').value;\n      this.descent = this.attribute('descent').value;\n      this.unitsPerEm = this.attribute('units-per-em').numValue();\n    }\n  };\n\n  // missing-glyph element\n  svg.Element.missingglyph = class extends svg.Element.path {\n    constructor (node) {\n      super(node);\n\n      this.horizAdvX = 0;\n    }\n  };\n\n  // glyph element\n  svg.Element.glyph = class extends svg.Element.path {\n    constructor (node) {\n      super(node);\n\n      this.horizAdvX = this.attribute('horiz-adv-x').numValue();\n      this.unicode = this.attribute('unicode').value;\n      this.arabicForm = this.attribute('arabic-form').value;\n    }\n  };\n\n  // text element\n  svg.Element.text = class extends svg.Element.RenderedElementBase {\n    constructor (node) {\n      super(node, true);\n    }\n\n    setContext (ctx) {\n      super.setContext(ctx);\n\n      let textBaseline = this.style('dominant-baseline').toTextBaseline();\n      if (isNullish(textBaseline)) textBaseline = this.style('alignment-baseline').toTextBaseline();\n      if (!isNullish(textBaseline)) ctx.textBaseline = textBaseline;\n    }\n\n    getBoundingBox () {\n      const x = this.attribute('x').toPixels('x');\n      const y = this.attribute('y').toPixels('y');\n      const fontSize = this.parent.style('font-size').numValueOrDefault(svg.Font.Parse(svg.ctx.font).fontSize);\n      return new svg.BoundingBox(x, y - fontSize, x + Math.floor(fontSize * 2.0 / 3.0) * this.children[0].getText().length, y);\n    }\n\n    renderChildren (ctx) {\n      this.x = this.attribute('x').toPixels('x');\n      this.y = this.attribute('y').toPixels('y');\n      this.x += this.getAnchorDelta(ctx, this, 0);\n      this.children.forEach((child, i) => {\n        this.renderChild(ctx, this, i);\n      });\n    }\n\n    getAnchorDelta (ctx, parent, startI) {\n      const textAnchor = this.style('text-anchor').valueOrDefault('start');\n      if (textAnchor !== 'start') {\n        let width = 0;\n        for (let i = startI; i < parent.children.length; i++) {\n          const child = parent.children[i];\n          if (i > startI && child.attribute('x').hasValue()) break; // new group\n          width += child.measureTextRecursive(ctx);\n        }\n        return -1 * (textAnchor === 'end' ? width : width / 2.0);\n      }\n      return 0;\n    }\n\n    renderChild (ctx, parent, i) {\n      const child = parent.children[i];\n      if (child.attribute('x').hasValue()) {\n        child.x = child.attribute('x').toPixels('x') + this.getAnchorDelta(ctx, parent, i);\n        if (child.attribute('dx').hasValue()) child.x += child.attribute('dx').toPixels('x');\n      } else {\n        if (this.attribute('dx').hasValue()) this.x += this.attribute('dx').toPixels('x');\n        if (child.attribute('dx').hasValue()) this.x += child.attribute('dx').toPixels('x');\n        child.x = this.x;\n      }\n      this.x = child.x + child.measureText(ctx);\n\n      if (child.attribute('y').hasValue()) {\n        child.y = child.attribute('y').toPixels('y');\n        if (child.attribute('dy').hasValue()) child.y += child.attribute('dy').toPixels('y');\n      } else {\n        if (this.attribute('dy').hasValue()) this.y += this.attribute('dy').toPixels('y');\n        if (child.attribute('dy').hasValue()) this.y += child.attribute('dy').toPixels('y');\n        child.y = this.y;\n      }\n      this.y = child.y;\n\n      child.render(ctx);\n\n      for (let j = 0; j < child.children.length; j++) {\n        this.renderChild(ctx, child, j);\n      }\n    }\n  };\n\n  // text base\n  svg.Element.TextElementBase = class extends svg.Element.RenderedElementBase {\n    getGlyph (font, text, i) {\n      const c = text[i];\n      let glyph = null;\n      if (font.isArabic) {\n        let arabicForm = 'isolated';\n        if ((i === 0 || text[i - 1] === ' ') && i < text.length - 2 && text[i + 1] !== ' ') arabicForm = 'terminal';\n        if (i > 0 && text[i - 1] !== ' ' && i < text.length - 2 && text[i + 1] !== ' ') arabicForm = 'medial';\n        if (i > 0 && text[i - 1] !== ' ' && (i === text.length - 1 || text[i + 1] === ' ')) arabicForm = 'initial';\n        if (typeof font.glyphs[c] !== 'undefined') {\n          glyph = font.glyphs[c][arabicForm];\n          if (isNullish(glyph) && font.glyphs[c].type === 'glyph') glyph = font.glyphs[c];\n        }\n      } else {\n        glyph = font.glyphs[c];\n      }\n      if (isNullish(glyph)) glyph = font.missingGlyph;\n      return glyph;\n    }\n\n    renderChildren (ctx) {\n      const customFont = this.parent.style('font-family').getDefinition();\n      if (!isNullish(customFont)) {\n        const fontSize = this.parent.style('font-size').numValueOrDefault(svg.Font.Parse(svg.ctx.font).fontSize);\n        const fontStyle = this.parent.style('font-style').valueOrDefault(svg.Font.Parse(svg.ctx.font).fontStyle);\n        let text = this.getText();\n        if (customFont.isRTL) text = text.split('').reverse().join('');\n\n        const dx = svg.ToNumberArray(this.parent.attribute('dx').value);\n        for (let i = 0; i < text.length; i++) {\n          const glyph = this.getGlyph(customFont, text, i);\n          const scale = fontSize / customFont.fontFace.unitsPerEm;\n          ctx.translate(this.x, this.y);\n          ctx.scale(scale, -scale);\n          const lw = ctx.lineWidth;\n          ctx.lineWidth = ctx.lineWidth * customFont.fontFace.unitsPerEm / fontSize;\n          if (fontStyle === 'italic') ctx.transform(1, 0, 0.4, 1, 0, 0);\n          glyph.render(ctx);\n          if (fontStyle === 'italic') ctx.transform(1, 0, -0.4, 1, 0, 0);\n          ctx.lineWidth = lw;\n          ctx.scale(1 / scale, -1 / scale);\n          ctx.translate(-this.x, -this.y);\n\n          this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / customFont.fontFace.unitsPerEm;\n          if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n            this.x += dx[i];\n          }\n        }\n        return;\n      }\n\n      if (ctx.fillStyle !== '') ctx.fillText(svg.compressSpaces(this.getText()), this.x, this.y);\n      if (ctx.strokeStyle !== '') ctx.strokeText(svg.compressSpaces(this.getText()), this.x, this.y);\n    }\n\n    getText () {\n      // OVERRIDE ME\n    }\n\n    measureTextRecursive (ctx) {\n      let width = this.measureText(ctx);\n      this.children.forEach((child) => {\n        width += child.measureTextRecursive(ctx);\n      });\n      return width;\n    }\n\n    measureText (ctx) {\n      const customFont = this.parent.style('font-family').getDefinition();\n      if (!isNullish(customFont)) {\n        const fontSize = this.parent.style('font-size').numValueOrDefault(svg.Font.Parse(svg.ctx.font).fontSize);\n        let measure = 0;\n        let text = this.getText();\n        if (customFont.isRTL) text = text.split('').reverse().join('');\n        const dx = svg.ToNumberArray(this.parent.attribute('dx').value);\n        for (let i = 0; i < text.length; i++) {\n          const glyph = this.getGlyph(customFont, text, i);\n          measure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;\n          if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n            measure += dx[i];\n          }\n        }\n        return measure;\n      }\n\n      const textToMeasure = svg.compressSpaces(this.getText());\n      if (!ctx.measureText) return textToMeasure.length * 10;\n\n      ctx.save();\n      this.setContext(ctx);\n      const {width} = ctx.measureText(textToMeasure);\n      ctx.restore();\n      return width;\n    }\n  };\n\n  // tspan\n  svg.Element.tspan = class extends svg.Element.TextElementBase {\n    constructor (node) {\n      super(node, true);\n\n      this.text = node.nodeValue || node.text || '';\n    }\n    getText () {\n      return this.text;\n    }\n  };\n\n  // tref\n  svg.Element.tref = class extends svg.Element.TextElementBase {\n    getText () {\n      const element = this.getHrefAttribute().getDefinition();\n      if (!isNullish(element)) return element.children[0].getText();\n      return undefined;\n    }\n  };\n\n  // a element\n  svg.Element.a = class extends svg.Element.TextElementBase {\n    constructor (node) {\n      super(node);\n\n      this.hasText = true;\n      [...node.childNodes].forEach((childNode) => {\n        if (childNode.nodeType !== 3) {\n          this.hasText = false;\n        }\n      });\n      // this might contain text\n      this.text = this.hasText ? node.childNodes[0].nodeValue : '';\n    }\n\n    getText () {\n      return this.text;\n    }\n\n    renderChildren (ctx) {\n      if (this.hasText) {\n        // render as text element\n        super.renderChildren(ctx);\n        const fontSize = new svg.Property(\n          'fontSize', svg.Font.Parse(svg.ctx.font).fontSize\n        );\n        svg.Mouse.checkBoundingBox(\n          this, new svg.BoundingBox(\n            this.x,\n            this.y - fontSize.toPixels('y'),\n            this.x + this.measureText(ctx),\n            this.y\n          )\n        );\n      } else {\n        // render as temporary group\n        const g = new svg.Element.g();\n        g.children = this.children;\n        g.parent = this;\n        g.render(ctx);\n      }\n    }\n\n    onclick () {\n      window.open(this.getHrefAttribute().value);\n    }\n\n    onmousemove () {\n      svg.ctx.canvas.style.cursor = 'pointer';\n    }\n  };\n\n  // image element\n  svg.Element.image = class extends svg.Element.RenderedElementBase {\n    constructor (node) {\n      super(node);\n\n      const href = this.getHrefAttribute().value;\n      if (href === '') {\n        return;\n      }\n      this._isSvg = href.match(/\\.svg$/);\n\n      svg.Images.push(this);\n      this.loaded = false;\n      if (!this._isSvg) {\n        this.img = document.createElement('img');\n        if (svg.opts.useCORS === true) {\n          this.img.crossOrigin = 'Anonymous';\n        }\n        this.img.addEventListener('load', () => {\n          this.loaded = true;\n        });\n        this.img.addEventListener('error', () => {\n          svg.log('ERROR: image \"' + href + '\" not found');\n          this.loaded = true;\n        });\n        this.img.src = href;\n      } else {\n        svg.ajax(href, true).then((img) => { // eslint-disable-line promise/prefer-await-to-then, promise/always-return\n          this.img = img;\n          this.loaded = true;\n        }).catch((err) => { // eslint-disable-line promise/prefer-await-to-callbacks\n          this.erred = true;\n          console.error('Ajax error for canvg', err); // eslint-disable-line no-console\n        });\n      }\n    }\n    renderChildren (ctx) {\n      const x = this.attribute('x').toPixels('x');\n      const y = this.attribute('y').toPixels('y');\n\n      const width = this.attribute('width').toPixels('x');\n      const height = this.attribute('height').toPixels('y');\n      if (width === 0 || height === 0) return;\n\n      ctx.save();\n      if (this._isSvg) {\n        ctx.drawSvg(this.img, x, y, width, height);\n      } else {\n        ctx.translate(x, y);\n        svg.AspectRatio(\n          ctx,\n          this.attribute('preserveAspectRatio').value,\n          width,\n          this.img.width,\n          height,\n          this.img.height,\n          0,\n          0\n        );\n        ctx.drawImage(this.img, 0, 0);\n      }\n      ctx.restore();\n    }\n\n    getBoundingBox () {\n      const x = this.attribute('x').toPixels('x');\n      const y = this.attribute('y').toPixels('y');\n      const width = this.attribute('width').toPixels('x');\n      const height = this.attribute('height').toPixels('y');\n      return new svg.BoundingBox(x, y, x + width, y + height);\n    }\n  };\n\n  // group element\n  svg.Element.g = class extends svg.Element.RenderedElementBase {\n    getBoundingBox () {\n      const bb = new svg.BoundingBox();\n      this.children.forEach((child) => {\n        bb.addBoundingBox(child.getBoundingBox());\n      });\n      return bb;\n    }\n  };\n\n  // symbol element\n  svg.Element.symbol = class extends svg.Element.RenderedElementBase {\n    render (ctx) {\n      // NO RENDER\n    }\n  };\n\n  // style element\n  svg.Element.style = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super(node);\n\n      // text, or spaces then CDATA\n      let css = '';\n      [...node.childNodes].forEach(({nodeValue}) => {\n        css += nodeValue;\n      });\n      // remove comments\n      css = css.replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+\\/)|(^\\s*\\/\\/.*)/gm, ''); // eslint-disable-line unicorn/no-unsafe-regex\n      // replace whitespace\n      css = svg.compressSpaces(css);\n      const cssDefs = css.split('}');\n      cssDefs.forEach((cssDef) => {\n        if (svg.trim(cssDef) !== '') {\n          let [cssClasses, cssProps] = cssDef.split('{');\n          cssClasses = cssClasses.split(',');\n          cssProps = cssProps.split(';');\n          cssClasses.forEach((cssClass) => {\n            cssClass = svg.trim(cssClass);\n            if (cssClass !== '') {\n              const props = {};\n              cssProps.forEach((cssProp) => {\n                const prop = cssProp.indexOf(':');\n                const name = cssProp.substr(0, prop);\n                const value = cssProp.substr(prop + 1, cssProp.length - prop);\n                if (!isNullish(name) && !isNullish(value)) {\n                  props[svg.trim(name)] = new svg.Property(svg.trim(name), svg.trim(value));\n                }\n              });\n              svg.Styles[cssClass] = props;\n              if (cssClass === '@font-face') {\n                const fontFamily = props['font-family'].value.replace(/\"/g, '');\n                const srcs = props.src.value.split(',');\n                srcs.forEach((src) => {\n                  if (src.includes('format(\"svg\")')) {\n                    const urlStart = src.indexOf('url');\n                    const urlEnd = src.indexOf(')', urlStart);\n                    const url = src.substr(urlStart + 5, urlEnd - urlStart - 6);\n                    // Can this ajax safely be converted to async?\n                    const doc = svg.parseXml(svg.ajax(url));\n                    const fonts = doc.getElementsByTagName('font');\n                    [...fonts].forEach((font) => {\n                      font = svg.CreateElement(font);\n                      svg.Definitions[fontFamily] = font;\n                    });\n                  }\n                });\n              }\n            }\n          });\n        }\n      });\n    }\n  };\n\n  // use element\n  svg.Element.use = class extends svg.Element.RenderedElementBase {\n    constructor (node) {\n      super(node);\n\n      this._el = this.getHrefAttribute().getDefinition();\n    }\n\n    setContext (ctx) {\n      super.setContext(ctx);\n      if (this.attribute('x').hasValue()) ctx.translate(this.attribute('x').toPixels('x'), 0);\n      if (this.attribute('y').hasValue()) ctx.translate(0, this.attribute('y').toPixels('y'));\n    }\n\n    path (ctx) {\n      const {_el: element} = this;\n      if (!isNullish(element)) element.path(ctx);\n    }\n\n    getBoundingBox () {\n      const {_el: element} = this;\n      if (!isNullish(element)) return element.getBoundingBox();\n      return undefined;\n    }\n\n    renderChildren (ctx) {\n      const {_el: element} = this;\n      if (!isNullish(element)) {\n        let tempSvg = element;\n        if (element.type === 'symbol') {\n          // render me using a temporary svg element in symbol cases\n          //  (https://www.w3.org/TR/SVG/struct.html#UseElement)\n          tempSvg = new svg.Element.svg();\n          tempSvg.type = 'svg';\n          tempSvg.attributes.viewBox = new svg.Property(\n            'viewBox', element.attribute('viewBox').value\n          );\n          tempSvg.attributes.preserveAspectRatio = new svg.Property(\n            'preserveAspectRatio', element.attribute('preserveAspectRatio').value\n          );\n          tempSvg.attributes.overflow = new svg.Property(\n            'overflow', element.attribute('overflow').value\n          );\n          tempSvg.children = element.children;\n        }\n        if (tempSvg.type === 'svg') {\n          // if symbol or svg, inherit width/height from me\n          if (this.attribute('width').hasValue()) {\n            tempSvg.attributes.width = new svg.Property(\n              'width', this.attribute('width').value\n            );\n          }\n          if (this.attribute('height').hasValue()) {\n            tempSvg.attributes.height = new svg.Property(\n              'height', this.attribute('height').value\n            );\n          }\n        }\n        const oldParent = tempSvg.parent;\n        tempSvg.parent = null;\n        tempSvg.render(ctx);\n        tempSvg.parent = oldParent;\n      }\n    }\n  };\n\n  // mask element\n  svg.Element.mask = class extends svg.Element.ElementBase {\n    apply (ctx, element) {\n      // render as temp svg\n      let x = this.attribute('x').toPixels('x');\n      let y = this.attribute('y').toPixels('y');\n      let width = this.attribute('width').toPixels('x');\n      let height = this.attribute('height').toPixels('y');\n\n      if (width === 0 && height === 0) {\n        const bb = new svg.BoundingBox();\n        this.children.forEach((child) => {\n          bb.addBoundingBox(child.getBoundingBox());\n        });\n        x = Math.floor(bb.x1);\n        y = Math.floor(bb.y1);\n        width = Math.floor(bb.width());\n        height = Math.floor(bb.height());\n      }\n\n      // temporarily remove mask to avoid recursion\n      const mask = element.attribute('mask').value;\n      element.attribute('mask').value = '';\n\n      const cMask = document.createElement('canvas');\n      cMask.width = x + width;\n      cMask.height = y + height;\n      const maskCtx = cMask.getContext('2d');\n      this.renderChildren(maskCtx);\n\n      const c = document.createElement('canvas');\n      c.width = x + width;\n      c.height = y + height;\n      const tempCtx = c.getContext('2d');\n      element.render(tempCtx);\n      tempCtx.globalCompositeOperation = 'destination-in';\n      tempCtx.fillStyle = maskCtx.createPattern(cMask, 'no-repeat');\n      tempCtx.fillRect(0, 0, x + width, y + height);\n\n      ctx.fillStyle = tempCtx.createPattern(c, 'no-repeat');\n      ctx.fillRect(0, 0, x + width, y + height);\n\n      // reassign mask\n      element.attribute('mask').value = mask;\n    }\n\n    render (ctx) {\n      // NO RENDER\n    }\n  };\n\n  // clip element\n  svg.Element.clipPath = class extends svg.Element.ElementBase {\n    apply (ctx) {\n      this.children.forEach((child) => {\n        if (typeof child.path !== 'undefined') {\n          let transform = null;\n          if (child.attribute('transform').hasValue()) {\n            transform = new svg.Transform(child.attribute('transform').value);\n            transform.apply(ctx);\n          }\n          child.path(ctx);\n          ctx.clip();\n          if (transform) { transform.unapply(ctx); }\n        }\n      });\n    }\n    render (ctx) {\n      // NO RENDER\n    }\n  };\n\n  // filters\n  svg.Element.filter = class extends svg.Element.ElementBase {\n    apply (ctx, element) {\n      // render as temp svg\n      const bb = element.getBoundingBox();\n      const x = Math.floor(bb.x1);\n      const y = Math.floor(bb.y1);\n      const width = Math.floor(bb.width());\n      const height = Math.floor(bb.height());\n\n      // temporarily remove filter to avoid recursion\n      const filter = element.style('filter').value;\n      element.style('filter').value = '';\n\n      let px = 0, py = 0;\n      this.children.forEach((child) => {\n        const efd = child.extraFilterDistance || 0;\n        px = Math.max(px, efd);\n        py = Math.max(py, efd);\n      });\n\n      const c = document.createElement('canvas');\n      c.width = width + 2 * px;\n      c.height = height + 2 * py;\n      const tempCtx = c.getContext('2d');\n      tempCtx.translate(-x + px, -y + py);\n      element.render(tempCtx);\n\n      // apply filters\n      this.children.forEach((child) => {\n        child.apply(tempCtx, 0, 0, width + 2 * px, height + 2 * py);\n      });\n\n      // render on me\n      ctx.drawImage(c, 0, 0, width + 2 * px, height + 2 * py, x - px, y - py, width + 2 * px, height + 2 * py);\n\n      // reassign filter\n      element.style('filter', true).value = filter;\n    }\n\n    render (ctx) {\n      // NO RENDER\n    }\n  };\n\n  svg.Element.feMorphology = class extends svg.Element.ElementBase {\n    apply (ctx, x, y, width, height) {\n      // TODO: implement\n    }\n  };\n\n  svg.Element.feComposite = class extends svg.Element.ElementBase {\n    apply (ctx, x, y, width, height) {\n      // TODO: implement\n    }\n  };\n\n  /**\n  * @param {Uint8ClampedArray} img\n  * @param {Integer} x\n  * @param {Integer} y\n  * @param {Float} width\n  * @param {Float} height\n  * @param {Integer} rgba\n  * @returns {Integer}\n  */\n  function imGet (img, x, y, width, height, rgba) {\n    return img[y * width * 4 + x * 4 + rgba];\n  }\n\n  /**\n  * @param {Uint8ClampedArray} img\n  * @param {Integer} x\n  * @param {Integer} y\n  * @param {Float} width\n  * @param {Float} height\n  * @param {Integer} rgba\n  * @param {Float} val\n  * @returns {void}\n  */\n  function imSet (img, x, y, width, height, rgba, val) {\n    img[y * width * 4 + x * 4 + rgba] = val;\n  }\n\n  svg.Element.feColorMatrix = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super(node);\n\n      let matrix = svg.ToNumberArray(this.attribute('values').value);\n      switch (this.attribute('type').valueOrDefault('matrix')) { // https://www.w3.org/TR/SVG/filters.html#feColorMatrixElement\n      case 'saturate': {\n        const s = matrix[0];\n        matrix = [\n          0.213 + 0.787 * s, 0.715 - 0.715 * s, 0.072 - 0.072 * s, 0, 0,\n          0.213 - 0.213 * s, 0.715 + 0.285 * s, 0.072 - 0.072 * s, 0, 0,\n          0.213 - 0.213 * s, 0.715 - 0.715 * s, 0.072 + 0.928 * s, 0, 0,\n          0, 0, 0, 1, 0,\n          0, 0, 0, 0, 1\n        ];\n        break;\n      } case 'hueRotate': {\n        const a = matrix[0] * Math.PI / 180.0;\n        const c = function (m1, m2, m3) {\n          return m1 + Math.cos(a) * m2 + Math.sin(a) * m3;\n        };\n        matrix = [\n          c(0.213, 0.787, -0.213), c(0.715, -0.715, -0.715), c(0.072, -0.072, 0.928), 0, 0,\n          c(0.213, -0.213, 0.143), c(0.715, 0.285, 0.140), c(0.072, -0.072, -0.283), 0, 0,\n          c(0.213, -0.213, -0.787), c(0.715, -0.715, 0.715), c(0.072, 0.928, 0.072), 0, 0,\n          0, 0, 0, 1, 0,\n          0, 0, 0, 0, 1\n        ];\n        break;\n      } case 'luminanceToAlpha':\n        matrix = [\n          0, 0, 0, 0, 0,\n          0, 0, 0, 0, 0,\n          0, 0, 0, 0, 0,\n          0.2125, 0.7154, 0.0721, 0, 0,\n          0, 0, 0, 0, 1\n        ];\n        break;\n      }\n      this.matrix = matrix;\n\n      this._m = (i, v) => {\n        const mi = matrix[i];\n        return mi * (mi < 0 ? v - 255 : v);\n      };\n    }\n    apply (ctx, x, y, width, height) {\n      const {_m: m} = this;\n      // assuming x==0 && y==0 for now\n      const srcData = ctx.getImageData(0, 0, width, height);\n      for (let _y = 0; _y < height; _y++) {\n        for (let _x = 0; _x < width; _x++) {\n          const r = imGet(srcData.data, _x, _y, width, height, 0);\n          const g = imGet(srcData.data, _x, _y, width, height, 1);\n          const b = imGet(srcData.data, _x, _y, width, height, 2);\n          const a = imGet(srcData.data, _x, _y, width, height, 3);\n          imSet(srcData.data, _x, _y, width, height, 0, m(0, r) + m(1, g) + m(2, b) + m(3, a) + m(4, 1));\n          imSet(srcData.data, _x, _y, width, height, 1, m(5, r) + m(6, g) + m(7, b) + m(8, a) + m(9, 1));\n          imSet(srcData.data, _x, _y, width, height, 2, m(10, r) + m(11, g) + m(12, b) + m(13, a) + m(14, 1));\n          imSet(srcData.data, _x, _y, width, height, 3, m(15, r) + m(16, g) + m(17, b) + m(18, a) + m(19, 1));\n        }\n      }\n      ctx.clearRect(0, 0, width, height);\n      ctx.putImageData(srcData, 0, 0);\n    }\n  };\n\n  svg.Element.feGaussianBlur = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super(node);\n\n      this.blurRadius = Math.floor(this.attribute('stdDeviation').numValue());\n      this.extraFilterDistance = this.blurRadius;\n    }\n\n    apply (ctx, x, y, width, height) {\n      // Todo: This might not be a problem anymore with out `instanceof` fix\n      // StackBlur requires canvas be on document\n      ctx.canvas.id = svg.UniqueId();\n      ctx.canvas.style.display = 'none';\n      document.body.append(ctx.canvas);\n      canvasRGBA(ctx.canvas, x, y, width, height, this.blurRadius);\n      ctx.canvas.remove();\n    }\n  };\n\n  // title element, do nothing\n  svg.Element.title = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super();\n    }\n  };\n\n  // desc element, do nothing\n  svg.Element.desc = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super();\n    }\n  };\n\n  svg.Element.MISSING = class extends svg.Element.ElementBase {\n    constructor (node) {\n      super();\n      svg.log('ERROR: Element \\'' + node.nodeName + '\\' not yet implemented.');\n    }\n  };\n\n  // element factory\n  svg.CreateElement = function (node) {\n    const className = node.nodeName\n      .replace(/^[^:]+:/, '') // remove namespace\n      .replace(/-/g, ''); // remove dashes\n    let e;\n    if (typeof svg.Element[className] !== 'undefined') {\n      e = new svg.Element[className](node);\n    } else {\n      e = new svg.Element.MISSING(node);\n    }\n\n    e.type = node.nodeName;\n    return e;\n  };\n\n  // load from url\n  svg.load = async function (ctx, url) {\n    const dom = await svg.ajax(url, true);\n    return svg.loadXml(ctx, dom);\n  };\n\n  // load from xml\n  svg.loadXml = function (ctx, xml) {\n    return svg.loadXmlDoc(ctx, svg.parseXml(xml));\n  };\n\n  svg.loadXmlDoc = function (ctx, dom) {\n    let res;\n    svg.init(ctx);\n\n    const mapXY = function (p) {\n      let e = ctx.canvas;\n      while (e) {\n        p.x -= e.offsetLeft;\n        p.y -= e.offsetTop;\n        e = e.offsetParent;\n      }\n      if (window.scrollX) p.x += window.scrollX;\n      if (window.scrollY) p.y += window.scrollY;\n      return p;\n    };\n\n    // bind mouse\n    if (svg.opts.ignoreMouse !== true) {\n      ctx.canvas.addEventListener('click', function (e) {\n        const args = !isNullish(e)\n          ? [e.clientX, e.clientY]\n          : [event.clientX, event.clientY]; // eslint-disable-line no-restricted-globals\n        const {x, y} = mapXY(new svg.Point(...args));\n        svg.Mouse.onclick(x, y);\n      });\n      ctx.canvas.addEventListener('mousemove', function (e) {\n        const args = !isNullish(e)\n          ? [e.clientX, e.clientY]\n          : [event.clientX, event.clientY]; // eslint-disable-line no-restricted-globals\n        const {x, y} = mapXY(new svg.Point(...args));\n        svg.Mouse.onmousemove(x, y);\n      });\n    }\n\n    const e = svg.CreateElement(dom.documentElement);\n    e.root = true;\n\n    // render loop\n    let isFirstRender = true;\n    const draw = function (resolve) {\n      svg.ViewPort.Clear();\n      if (ctx.canvas.parentNode) {\n        svg.ViewPort.SetCurrent(\n          ctx.canvas.parentNode.clientWidth,\n          ctx.canvas.parentNode.clientHeight\n        );\n      }\n\n      if (svg.opts.ignoreDimensions !== true) {\n        // set canvas size\n        if (e.style('width').hasValue()) {\n          ctx.canvas.width = e.style('width').toPixels('x');\n          ctx.canvas.style.width = ctx.canvas.width + 'px';\n        }\n        if (e.style('height').hasValue()) {\n          ctx.canvas.height = e.style('height').toPixels('y');\n          ctx.canvas.style.height = ctx.canvas.height + 'px';\n        }\n      }\n      let cWidth = ctx.canvas.clientWidth || ctx.canvas.width;\n      let cHeight = ctx.canvas.clientHeight || ctx.canvas.height;\n      if (svg.opts.ignoreDimensions === true &&\n        e.style('width').hasValue() && e.style('height').hasValue()\n      ) {\n        cWidth = e.style('width').toPixels('x');\n        cHeight = e.style('height').toPixels('y');\n      }\n      svg.ViewPort.SetCurrent(cWidth, cHeight);\n\n      if (!isNullish(svg.opts.offsetX)) {\n        e.attribute('x', true).value = svg.opts.offsetX;\n      }\n      if (!isNullish(svg.opts.offsetY)) {\n        e.attribute('y', true).value = svg.opts.offsetY;\n      }\n      if (!isNullish(svg.opts.scaleWidth) || !isNullish(svg.opts.scaleHeight)) {\n        const viewBox = svg.ToNumberArray(e.attribute('viewBox').value);\n        let xRatio = null, yRatio = null;\n\n        if (!isNullish(svg.opts.scaleWidth)) {\n          if (e.attribute('width').hasValue()) {\n            xRatio = e.attribute('width').toPixels('x') / svg.opts.scaleWidth;\n          } else if (!isNaN(viewBox[2])) {\n            xRatio = viewBox[2] / svg.opts.scaleWidth;\n          }\n        }\n\n        if (!isNullish(svg.opts.scaleHeight)) {\n          if (e.attribute('height').hasValue()) {\n            yRatio = e.attribute('height').toPixels('y') / svg.opts.scaleHeight;\n          } else if (!isNaN(viewBox[3])) {\n            yRatio = viewBox[3] / svg.opts.scaleHeight;\n          }\n        }\n\n        if (isNullish(xRatio)) { xRatio = yRatio; }\n        if (isNullish(yRatio)) { yRatio = xRatio; }\n\n        e.attribute('width', true).value = svg.opts.scaleWidth;\n        e.attribute('height', true).value = svg.opts.scaleHeight;\n        e.attribute('viewBox', true).value = '0 0 ' + (cWidth * xRatio) + ' ' + (cHeight * yRatio);\n        e.attribute('preserveAspectRatio', true).value = 'none';\n      }\n\n      // clear and render\n      if (svg.opts.ignoreClear !== true) {\n        ctx.clearRect(0, 0, cWidth, cHeight);\n      }\n      e.render(ctx);\n      if (isFirstRender) {\n        isFirstRender = false;\n        resolve(dom);\n      }\n    };\n\n    let waitingForImages = true;\n    svg.intervalID = setInterval(function () {\n      let needUpdate = false;\n\n      if (waitingForImages && svg.ImagesLoaded()) {\n        waitingForImages = false;\n        needUpdate = true;\n      }\n\n      // need update from mouse events?\n      if (svg.opts.ignoreMouse !== true) {\n        needUpdate = needUpdate || svg.Mouse.hasEvents();\n      }\n\n      // need update from animations?\n      if (svg.opts.ignoreAnimation !== true) {\n        svg.Animations.forEach((animation) => {\n          const needAnimationUpdate = animation.update(1000 / svg.FRAMERATE);\n          needUpdate = needUpdate || needAnimationUpdate;\n        });\n      }\n\n      // need update from redraw?\n      if (typeof svg.opts.forceRedraw === 'function') {\n        if (svg.opts.forceRedraw() === true) {\n          needUpdate = true;\n        }\n      }\n\n      // render if needed\n      if (needUpdate) {\n        draw(res);\n        svg.Mouse.runEvents(); // run and clear our events\n      }\n    }, 1000 / svg.FRAMERATE);\n    // Todo: Replace with an image loading Promise utility?\n    // eslint-disable-next-line promise/avoid-new\n    return new Promise((resolve, reject) => {\n      if (svg.ImagesLoaded()) {\n        waitingForImages = false;\n        draw(resolve);\n        return;\n      }\n      res = resolve;\n    });\n  };\n\n  svg.stop = () => {\n    if (svg.intervalID) {\n      clearInterval(svg.intervalID);\n    }\n  };\n\n  svg.Mouse = {\n    events: [],\n    hasEvents () { return this.events.length !== 0; },\n\n    onclick (x, y) {\n      this.events.push({\n        type: 'onclick', x, y,\n        run (e) { if (e.onclick) e.onclick(); }\n      });\n    },\n\n    onmousemove (x, y) {\n      this.events.push({\n        type: 'onmousemove', x, y,\n        run (e) { if (e.onmousemove) e.onmousemove(); }\n      });\n    },\n\n    eventElements: [],\n\n    checkPath (element, ctx) {\n      this.events.forEach(({x, y}, i) => {\n        if (ctx.isPointInPath && ctx.isPointInPath(x, y)) {\n          this.eventElements[i] = element;\n        }\n      });\n    },\n\n    checkBoundingBox (element, bb) {\n      this.events.forEach(({x, y}, i) => {\n        if (bb.isPointInBox(x, y)) {\n          this.eventElements[i] = element;\n        }\n      });\n    },\n\n    runEvents () {\n      svg.ctx.canvas.style.cursor = '';\n\n      this.events.forEach((e, i) => {\n        let element = this.eventElements[i];\n        while (element) {\n          e.run(element);\n          element = element.parent;\n        }\n      });\n\n      // done running, clear\n      this.events = [];\n      this.eventElements = [];\n    }\n  };\n\n  return svg;\n}\n\nif (typeof CanvasRenderingContext2D !== 'undefined') {\n  CanvasRenderingContext2D.prototype.drawSvg = function (s, dx, dy, dw, dh) {\n    canvg(this.canvas, s, {\n      ignoreMouse: true,\n      ignoreAnimation: true,\n      ignoreDimensions: true,\n      ignoreClear: true,\n      offsetX: dx,\n      offsetY: dy,\n      scaleWidth: dw,\n      scaleHeight: dh\n    });\n  };\n}\n","/**\n * @file ext-server_moinsave.js\n *\n * @license (MIT OR GPL-2.0-or-later)\n *\n * @copyright 2010 Alexis Deveria, 2011 MoinMoin:ReimarBauer\n *  adopted for moinmoins item storage. It sends in one post png and svg data\n *  (I agree to dual license my work to additional GPLv2 or later)\n */\nimport {canvg} from '../canvg/canvg.js';\n\nexport default {\n  name: 'server_moinsave',\n  async init ({$, encode64, importLocale}) {\n    const strings = await importLocale();\n    const svgEditor = this;\n    const svgCanvas = svgEditor.canvas;\n    const saveSvgAction = '/+modify';\n\n    // Create upload target (hidden iframe)\n    //  Hiding by size instead of display to avoid FF console errors\n    //    with `getBBox` in browser.js `supportsPathBBox_`)\n    /* const target = */ $(\n      `<iframe name=\"output_frame\" title=\"${strings.hiddenframe}\"\n        style=\"width: 0; height: 0;\" src=\"data:text/html;base64,PGh0bWw+PC9odG1sPg==\"/>`\n    ).appendTo('body');\n\n    svgEditor.setCustomHandlers({\n      async save (win, data) {\n        const svg = '<?xml version=\"1.0\"?>\\n' + data;\n        const {pathname} = new URL(location);\n        const name = pathname.replace(/\\/+get\\//, '');\n        const svgData = encode64(svg);\n        if (!$('#export_canvas').length) {\n          $('<canvas>', {id: 'export_canvas'}).hide().appendTo('body');\n        }\n        const c = $('#export_canvas')[0];\n        c.width = svgCanvas.contentW;\n        c.height = svgCanvas.contentH;\n        await canvg(c, svg);\n        const datauri = c.toDataURL('image/png');\n        // const {uiStrings} = svgEditor;\n        const pngData = encode64(datauri); // Brett: This encoding seems unnecessary\n        /* const form = */ $('<form>').attr({\n          method: 'post',\n          action: saveSvgAction + '/' + name,\n          target: 'output_frame'\n        }).append(`\n          <input type=\"hidden\" name=\"png_data\" value=\"${pngData}\">\n          <input type=\"hidden\" name=\"filepath\" value=\"${svgData}\">\n          <input type=\"hidden\" name=\"filename\" value=\"drawing.svg\">\n          <input type=\"hidden\" name=\"contenttype\" value=\"application/x-svgdraw\">\n        `).appendTo('body')\n          .submit().remove();\n        $.alert(strings.saved);\n        top.window.location = '/' + name;\n      }\n    });\n  }\n};\n"],"names":["simpleColors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","feldspar","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslateblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","violetred","wheat","white","whitesmoke","yellow","yellowgreen","colorDefs","re","example","process","_","bits","map","b","Number","parseInt","RGBColor","colorString","ok","charAt","substr","replace","toLowerCase","forEach","processor","exec","r","g","Object","assign","isNaN","toString","length","examples","flatMap","keys","xml","document","createElement","setAttribute","append","listItem","listColor","exampleDiv","style","cssText","toHex","listItemValue","toRGB","e","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","mulTable","shgTable","processImage","img","canvas","radius","blurAlphaChannel","getElementById","w","naturalWidth","h","naturalHeight","width","height","context","getContext","clearRect","drawImage","processCanvasRGBA","processCanvasRGB","getImageDataFromCanvas","topX","topY","getImageData","Error","imageData","processImageDataRGBA","putImageData","pixels","data","x","y","i","p","yp","yi","yw","rSum","gSum","bSum","aSum","rOutSum","gOutSum","bOutSum","aOutSum","rInSum","gInSum","bInSum","aInSum","pr","pg","pb","pa","rbs","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","BlurStack","stack","stackEnd","next","stackIn","stackOut","mulSum","shgSum","a","processImageDataRGB","isNullish","val","undefined","canvg","target","s","opts","svgTags","querySelectorAll","Promise","all","svgTag","c","clientWidth","clientHeight","before","remove","innerHTML","svg","stop","build","childNodes","nodeName","ctx","documentElement","loadXmlDoc","loadXml","load","FRAMERATE","MAX_VIRTUAL_PIXELS","log","msg","console","init","uniqueId","UniqueId","Definitions","Styles","Animations","Images","ViewPort","viewPorts","Clear","SetCurrent","push","RemoveCurrent","pop","Current","ComputeSize","d","Math","sqrt","ImagesLoaded","every","loaded","trim","compressSpaces","ajax","url","asynch","AJAX","window","XMLHttpRequest","ActiveXObject","resolve","reject","req","open","addEventListener","responseText","send","parseXml","DOMParser","parser","parseFromString","xmlDoc","async","loadXML","textBaselineMapping","baseline","middle","central","ideographic","alphabetic","hanging","mathematical","Property","name","value","hasValue","n","parseFloat","String","endsWith","def","numValue","opacityProp","newValue","color","match","startsWith","getDefinition","createGradient","createPattern","getHrefAttribute","pt","attribute","viewPort","em","fontSize","Font","Parse","font","toPixels","processPercent","getEM","getDPI","PI","Variants","Weights","CreateFont","fontStyle","fontVariant","fontWeight","fontFamily","inherit","f","join","ds","split","set","ff","includes","ToNumberArray","_a","Point","atan2","v","xp","CreatePoint","CreatePath","path","BoundingBox","x1","y1","x2","y2","NaN","addPoint","bb","p0x","p0y","p1x","p1y","p2x","p2y","cp1x","cp1y","cp2x","cp2y","addBezierCurve","p3x","p3y","p0","p1","p2","p3","t","addX","addY","b2ac","t1","t2","Transform","Type","translate","apply","unapply","applyToPoint","applyTransform","rotate","angle","cx","cy","toRadians","cos","sin","scale","matrix","m","transform","SkewBase","skewX","skewY","transforms","type","AspectRatio","aspectRatio","desiredWidth","desiredHeight","minX","minY","refX","refY","align","meetOrSlice","scaleX","scaleY","scaleMin","min","scaleMax","max","Element","EmptyProperty","ElementBase","node","captureTextNodes","arguments","attributes","styles","children","nodeType","childNode","addChild","text","nodeValue","tspan","entries","styleValue","classes","clss","_styles","createIfNotExists","skipAncestors","parent","ps","save","mask","filter","setContext","renderChildren","clearContext","restore","child","render","create","CreateElement","RenderedElementBase","isUrlDefinition","fs","getFillStyleDefinition","fillStyle","addOpacity","strokeStyle","newLineWidth","lineWidth","lineCap","lineJoin","miterLimit","gaps","setLineDash","webkitLineDash","mozDash","offset","numValueOrDefault","lineDashOffset","webkitLineDashOffset","mozDashOffset","clip","globalAlpha","PathElementBase","beginPath","Mouse","checkPath","valueOrDefault","fill","stroke","markers","getMarkers","marker","getComputedStyle","getPropertyValue","root","moveTo","lineTo","closePath","viewBox","rect","rx","ry","quadraticCurveTo","circle","arc","KAPPA","ellipse","bezierCurveTo","line","points","getPoints","angleTo","polyline","_x","_y","polygon","PathParser","tokens","reset","command","previousCommand","start","control","current","angles","isEnd","isCommandOrEnd","isRelativeCommand","getToken","getScalar","nextCommand","getPoint","makeAbsolute","getAsControlPoint","getAsCurrentPoint","getReflectedControlPoint","addMarker","from","priorTo","addMarkerAngle","getMarkerPoints","getMarkerAngles","j","pp","_p","newP","curr","cntrl","cp","addQuadraticCurve","xAxisRotation","largeArcFlag","sweepFlag","currp","l","cpp","centp","u","acos","a1","ad","dir","ah","halfWay","_r","sx","sy","point","pattern","element","tempSvg","cctx","defs","GradientBase","gradientUnits","stops","parentOpacityProp","stopsContainer","addParentOpacity","getGradient","addColorStop","rootView","group","tempCtx","linearGradient","useBB","getBoundingBox","createLinearGradient","radialGradient","fx","fy","createRadialGradient","stopColor","AnimateBase","duration","begin","toMilliseconds","maxDuration","initialValue","initialUnits","removed","to","values","attributeType","attributeName","delta","getProperty","getUnits","frozen","animationFrozen","animationFrozenValue","updated","calcValue","ret","progress","lb","floor","ub","ceil","animate","animateColor","animateTransform","fr","horizAdvX","isRTL","isArabic","fontFace","missingGlyph","glyphs","arabicForm","unicode","fontface","ascent","descent","unitsPerEm","missingglyph","glyph","textBaseline","toTextBaseline","getText","getAnchorDelta","renderChild","startI","textAnchor","measureTextRecursive","measureText","TextElementBase","customFont","reverse","dx","getGlyph","lw","fillText","strokeText","measure","textToMeasure","tref","hasText","checkBoundingBox","cursor","image","href","_isSvg","useCORS","crossOrigin","src","then","err","erred","error","drawSvg","addBoundingBox","symbol","css","cssDefs","cssDef","cssClasses","cssProps","cssClass","props","cssProp","prop","indexOf","srcs","urlStart","urlEnd","doc","fonts","getElementsByTagName","use","_el","preserveAspectRatio","overflow","oldParent","cMask","maskCtx","globalCompositeOperation","fillRect","clipPath","px","py","efd","extraFilterDistance","feMorphology","feComposite","imGet","rgba","imSet","feColorMatrix","m1","m2","m3","_m","mi","srcData","feGaussianBlur","blurRadius","id","display","body","canvasRGBA","title","desc","MISSING","className","dom","res","mapXY","offsetLeft","offsetTop","offsetParent","scrollX","scrollY","ignoreMouse","args","clientX","clientY","event","onclick","onmousemove","isFirstRender","draw","parentNode","ignoreDimensions","cWidth","cHeight","offsetX","offsetY","scaleWidth","scaleHeight","xRatio","yRatio","ignoreClear","waitingForImages","intervalID","setInterval","needUpdate","hasEvents","ignoreAnimation","animation","needAnimationUpdate","update","forceRedraw","runEvents","clearInterval","events","run","eventElements","isPointInPath","isPointInBox","CanvasRenderingContext2D","dy","dw","dh","$","encode64","importLocale","strings","svgEditor","svgCanvas","saveSvgAction","hiddenframe","appendTo","setCustomHandlers","win","URL","location","pathname","svgData","hide","contentW","contentH","datauri","toDataURL","pngData","attr","method","action","submit","alert","saved","top"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}