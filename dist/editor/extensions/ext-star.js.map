{"version":3,"file":"ext-star.js","sources":["../../../src/editor/extensions/star-icons.svg","../../../src/editor/extensions/ext-star.js"],"sourcesContent":["export default \"star-icons.svg\"","/**\n * @file ext-star.js\n *\n *\n * @copyright 2010 CloudCanvas, Inc. All rights reserved\n *\n */\n\nimport './star-icons.svg';\n\nexport default {\n  name: 'star',\n  async init (S) {\n    const svgEditor = this;\n    const svgCanvas = svgEditor.canvas;\n\n    const {$, importLocale} = S; // {svgcontent},\n    let\n      selElems,\n      // editingitex = false,\n      // svgdoc = S.svgroot.parentNode.ownerDocument,\n      started,\n      newFO;\n      // edg = 0,\n      // newFOG, newFOGParent, newDef, newImageName, newMaskID,\n      // undoCommand = 'Not image',\n      // modeChangeG, ccZoom, wEl, hEl, wOffset, hOffset, ccRgbEl, brushW, brushH;\n    const strings = await importLocale();\n\n    /**\n     *\n     * @param {boolean} on\n     * @returns {void}\n     */\n    function showPanel (on) {\n      let fcRules = $('#fc_rules');\n      if (!fcRules.length) {\n        fcRules = $('<style id=\"fc_rules\"></style>').appendTo('head');\n      }\n      fcRules.text(!on ? '' : ' #tool_topath { display: none !important; }');\n      $('#star_panel').toggle(on);\n    }\n\n    /*\n    function toggleSourceButtons(on){\n      $('#star_save, #star_cancel').toggle(on);\n    }\n    */\n\n    /**\n     *\n     * @param {string} attr\n     * @param {string|Float} val\n     * @returns {void}\n     */\n    function setAttr (attr, val) {\n      svgCanvas.changeSelectedAttribute(attr, val);\n      svgCanvas.call('changed', selElems);\n    }\n\n    /*\n    function cot(n){\n      return 1 / Math.tan(n);\n    }\n\n    function sec(n){\n      return 1 / Math.cos(n);\n    }\n    */\n    const buttons = [{\n      id: 'tool_star',\n      icon: svgEditor.curConfig.extIconsPath + 'star.png',\n      type: 'mode',\n      position: 12,\n      events: {\n        click () {\n          showPanel(true);\n          svgCanvas.setMode('star');\n        }\n      }\n    }];\n    const contextTools = [{\n      type: 'input',\n      panel: 'star_panel',\n      id: 'starNumPoints',\n      size: 3,\n      defval: 5,\n      events: {\n        change () {\n          setAttr('point', this.value);\n        }\n      }\n    }, {\n      type: 'input',\n      panel: 'star_panel',\n      id: 'starRadiusMulitplier',\n      size: 3,\n      defval: 2.5\n    }, {\n      type: 'input',\n      panel: 'star_panel',\n      id: 'radialShift',\n      size: 3,\n      defval: 0,\n      events: {\n        change () {\n          setAttr('radialshift', this.value);\n        }\n      }\n    }];\n\n    return {\n      name: strings.name,\n      svgicons: svgEditor.curConfig.extIconsPath + 'star-icons.svg',\n      buttons: strings.buttons.map((button, i) => {\n        return Object.assign(buttons[i], button);\n      }),\n      context_tools: strings.contextTools.map((contextTool, i) => {\n        return Object.assign(contextTools[i], contextTool);\n      }),\n      callback () {\n        $('#star_panel').hide();\n        // const endChanges = function(){};\n      },\n      mouseDown (opts) {\n        const rgb = svgCanvas.getColor('fill');\n        // const ccRgbEl = rgb.substring(1, rgb.length);\n        const sRgb = svgCanvas.getColor('stroke');\n        // const ccSRgbEl = sRgb.substring(1, rgb.length);\n        const sWidth = svgCanvas.getStrokeWidth();\n\n        if (svgCanvas.getMode() === 'star') {\n          started = true;\n\n          newFO = svgCanvas.addSVGElementFromJson({\n            element: 'polygon',\n            attr: {\n              cx: opts.start_x,\n              cy: opts.start_y,\n              id: svgCanvas.getNextId(),\n              shape: 'star',\n              point: document.getElementById('starNumPoints').value,\n              r: 0,\n              radialshift: document.getElementById('radialShift').value,\n              r2: 0,\n              orient: 'point',\n              fill: rgb,\n              strokecolor: sRgb,\n              strokeWidth: sWidth\n            }\n          });\n          return {\n            started: true\n          };\n        }\n        return undefined;\n      },\n      mouseMove (opts) {\n        if (!started) {\n          return undefined;\n        }\n        if (svgCanvas.getMode() === 'star') {\n          const c = $(newFO).attr(['cx', 'cy', 'point', 'orient', 'fill', 'strokecolor', 'strokeWidth', 'radialshift']);\n\n          let x = opts.mouse_x;\n          let y = opts.mouse_y;\n          const {cx, cy, fill, strokecolor, strokeWidth, radialshift, point, orient} = c,\n            circumradius = (Math.sqrt((x - cx) * (x - cx) + (y - cy) * (y - cy))) / 1.5,\n            inradius = circumradius / document.getElementById('starRadiusMulitplier').value;\n          newFO.setAttribute('r', circumradius);\n          newFO.setAttribute('r2', inradius);\n\n          let polyPoints = '';\n          for (let s = 0; point >= s; s++) {\n            let angle = 2.0 * Math.PI * (s / point);\n            if (orient === 'point') {\n              angle -= (Math.PI / 2);\n            } else if (orient === 'edge') {\n              angle = (angle + (Math.PI / point)) - (Math.PI / 2);\n            }\n\n            x = (circumradius * Math.cos(angle)) + cx;\n            y = (circumradius * Math.sin(angle)) + cy;\n\n            polyPoints += x + ',' + y + ' ';\n\n            if (!isNaN(inradius)) {\n              angle = (2.0 * Math.PI * (s / point)) + (Math.PI / point);\n              if (orient === 'point') {\n                angle -= (Math.PI / 2);\n              } else if (orient === 'edge') {\n                angle = (angle + (Math.PI / point)) - (Math.PI / 2);\n              }\n              angle += radialshift;\n\n              x = (inradius * Math.cos(angle)) + cx;\n              y = (inradius * Math.sin(angle)) + cy;\n\n              polyPoints += x + ',' + y + ' ';\n            }\n          }\n          newFO.setAttribute('points', polyPoints);\n          newFO.setAttribute('fill', fill);\n          newFO.setAttribute('stroke', strokecolor);\n          newFO.setAttribute('stroke-width', strokeWidth);\n          /* const shape = */ newFO.getAttribute('shape');\n\n          return {\n            started: true\n          };\n        }\n        return undefined;\n      },\n      mouseUp () {\n        if (svgCanvas.getMode() === 'star') {\n          const attrs = $(newFO).attr(['r']);\n          // svgCanvas.addToSelection([newFO], true);\n          return {\n            keep: (attrs.r !== '0'),\n            element: newFO\n          };\n        }\n        return undefined;\n      },\n      selectedChanged (opts) {\n        // Use this to update the current selected elements\n        selElems = opts.elems;\n\n        let i = selElems.length;\n        while (i--) {\n          const elem = selElems[i];\n          if (elem && elem.getAttribute('shape') === 'star') {\n            if (opts.selectedElement && !opts.multiselected) {\n              // $('#starRadiusMulitplier').val(elem.getAttribute('r2'));\n              $('#starNumPoints').val(elem.getAttribute('point'));\n              $('#radialShift').val(elem.getAttribute('radialshift'));\n              showPanel(true);\n            } else {\n              showPanel(false);\n            }\n          } else {\n            showPanel(false);\n          }\n        }\n      },\n      elementChanged (opts) {\n        // const elem = opts.elems[0];\n      }\n    };\n  }\n};\n"],"names":["name","init","S","showPanel","setAttr","attr","val","svgCanvas","changeSelectedAttribute","call","selElems","on","fcRules","$","length","appendTo","text","toggle","svgEditor","canvas","importLocale","strings","buttons","id","icon","curConfig","extIconsPath","type","position","events","click","setMode","contextTools","panel","size","defval","change","value","svgicons","map","button","i","Object","assign","context_tools","contextTool","callback","hide","mouseDown","opts","rgb","getColor","sRgb","sWidth","getStrokeWidth","getMode","started","newFO","addSVGElementFromJson","element","cx","start_x","cy","start_y","getNextId","shape","point","document","getElementById","r","radialshift","r2","orient","fill","strokecolor","strokeWidth","undefined","mouseMove","c","x","mouse_x","y","mouse_y","circumradius","Math","sqrt","inradius","setAttribute","polyPoints","s","angle","PI","cos","sin","isNaN","getAttribute","mouseUp","attrs","keep","selectedChanged","elems","elem","selectedElement","multiselected","elementChanged"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}