{"version":3,"file":"ext-helloworld.js","sources":["../../../src/editor/extensions/ext-helloworld.js"],"sourcesContent":["/**\n * @file ext-helloworld.js\n *\n * @license MIT\n *\n * @copyright 2010 Alexis Deveria\n *\n */\n\n/**\n* This is a very basic SVG-Edit extension. It adds a \"Hello World\" button in\n*  the left (\"mode\") panel. Clicking on the button, and then the canvas\n*  will show the user the point on the canvas that was clicked on.\n*/\nexport default {\n  name: 'helloworld',\n  async init ({$, importLocale}) {\n    // See `/editor/extensions/ext-locale/helloworld/`\n    const strings = await importLocale();\n    const svgEditor = this;\n    const svgCanvas = svgEditor.canvas;\n    return {\n      name: strings.name,\n      // For more notes on how to make an icon file, see the source of\n      // the helloworld-icon.xml\n      svgicons: 'helloworld-icon.xml',\n\n      // Multiple buttons can be added in this array\n      buttons: [{\n        // Must match the icon ID in helloworld-icon.xml\n        id: 'hello_world',\n\n        // Fallback, e.g., for `file:///` access\n        icon: 'helloworld.png',\n\n        // This indicates that the button will be added to the \"mode\"\n        // button panel on the left side\n        type: 'mode',\n\n        // Tooltip text\n        title: strings.buttons[0].title,\n\n        // Events\n        events: {\n          click () {\n            // The action taken when the button is clicked on.\n            // For \"mode\" buttons, any other button will\n            // automatically be de-pressed.\n            svgCanvas.setMode('hello_world');\n          }\n        }\n      }],\n      // This is triggered when the main mouse button is pressed down\n      // on the editor canvas (not the tool panels)\n      mouseDown () {\n        // Check the mode on mousedown\n        if (svgCanvas.getMode() === 'hello_world') {\n          // The returned object must include \"started\" with\n          // a value of true in order for mouseUp to be triggered\n          return {started: true};\n        }\n        return undefined;\n      },\n\n      // This is triggered from anywhere, but \"started\" must have been set\n      // to true (see above). Note that \"opts\" is an object with event info\n      mouseUp (opts) {\n        // Check the mode on mouseup\n        if (svgCanvas.getMode() === 'hello_world') {\n          const zoom = svgCanvas.getZoom();\n\n          // Get the actual coordinate by dividing by the zoom value\n          const x = opts.mouse_x / zoom;\n          const y = opts.mouse_y / zoom;\n\n          // We do our own formatting\n          let {text} = strings;\n          [\n            ['x', x],\n            ['y', y]\n          ].forEach(([prop, val]) => {\n            text = text.replace('{' + prop + '}', val);\n          });\n\n          // Show the text using the custom alert function\n          $.alert(text);\n        }\n      }\n    };\n  }\n};\n"],"names":["name","init","$","importLocale","strings","svgEditor","svgCanvas","canvas","svgicons","buttons","id","icon","type","title","events","click","setMode","mouseDown","getMode","started","undefined","mouseUp","opts","zoom","getZoom","x","mouse_x","y","mouse_y","text","forEach","prop","val","replace","alert"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}